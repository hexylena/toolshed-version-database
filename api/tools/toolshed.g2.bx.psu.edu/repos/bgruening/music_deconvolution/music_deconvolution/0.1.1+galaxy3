{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/bgruening/music_deconvolution/music_deconvolution/0.1.1+galaxy3", "name": "MuSiC Deconvolution", "version": "0.1.1+galaxy3", "description": "estimate cell type proportions in bulk RNA-seq data", "labels": [], "edam_operations": ["operation_0250", "operation_2430", "operation_0331"], "edam_topics": ["topic_0130", "topic_3307", "topic_0199", "topic_3398", "topic_0123"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "popmusic", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "music_deconvolution", "owner": "bgruening", "changeset_revision": "56371b5a2da9", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "scrna_eset", "argument": null, "type": "data", "label": "scRNA Dataset", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "bulk_eset", "argument": null, "type": "data", "label": "Bulk RNA Dataset", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "do", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "estimateprops", "inputs": [{"model_class": "SelectToolParameter", "name": "est_methods", "argument": null, "type": "select", "label": "Methods to use", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": ["MuSiC", "NNLS"], "options": [["MuSiC", "MuSiC", true], ["NNLS", "NNLS", true]], "display": null, "multiple": true, "textable": false}, {"model_class": "TextToolParameter", "name": "celltypes_label", "argument": null, "type": "text", "label": "Cell Types Label from scRNA dataset", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "cellType", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "samples_label", "argument": null, "type": "text", "label": "Samples Identifier from scRNA dataset", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "sampleID", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "celltypes", "argument": null, "type": "text", "label": "Comma list of cell types to use from scRNA dataset", "help": "If blank, then use all available cell types.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "phenotype_factors", "argument": null, "type": "text", "label": "Phenotype factors", "help": "List of phenotypes factors to be used in the linear regression. Please make sure that each factor has more than one unique value. Names correspond to column names in the bulk RNA dataset phenotype table. If blank, then treat all bulk phenotype columns as factors.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "phenotype_factors_always_exclude", "argument": null, "type": "text", "label": "Excluded phenotype factors", "help": "List of phenotype factors to always exclude in the analysis", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "sampleID,SubjectName", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "disease_factor", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "no", "inputs": []}, {"model_class": "ConditionalWhen", "value": "yes", "inputs": [{"model_class": "TextToolParameter", "name": "phenotype_scrna_target", "argument": null, "type": "text", "label": "scRNA Phenotype Cell Target", "help": "The name of a target scRNA cell type to select in the phenotype comparison.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "phenotype_target", "argument": null, "type": "text", "label": "Bulk Phenotype Target", "help": "MUST exist in the bulk RNA datasets phenotype factors as above.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "phenotype_target_threshold", "argument": null, "type": "float", "label": "Bulk Phenotype Target Threshold", "help": "The (%) threshold at which the phenotype target manifests. Leave at -99 to select all.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "-99.0", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "sample_disease_group", "argument": null, "type": "text", "label": "scRNA Sample Disease Group", "help": "Name for target disease group, ideally a value from the scRNA phenotype factor data", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "sample_disease_group_scale", "argument": null, "type": "integer", "label": "scRNA Sample Disease Group (Scale)", "help": "Used to accentutate certain features in the plots. Increase this number to reduce the effect.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "use", "argument": null, "type": "select", "label": "Show proportions of a disease factor?", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no", "options": [["No", "no", true], ["Yes", "yes", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "FloatToolParameter", "name": "maxyscale", "argument": null, "type": "float", "label": "Scale all Y-axes to max limit", "help": "Leave blank to autoscale each plot.", "refresh_on_change": false, "min": 0.0, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "dendrogram", "inputs": [{"model_class": "TextToolParameter", "name": "celltypes_label", "argument": null, "type": "text", "label": "Cell Types Label from scRNA dataset", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "cellType", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "clustertype_label", "argument": null, "type": "text", "label": "Cluster Types Label from scRNA dataset", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "clusterType", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "samples_label", "argument": null, "type": "text", "label": "Samples Identifier from scRNA dataset", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "sampleID", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "celltypes", "argument": null, "type": "text", "label": "Comma list of cell types to use from scRNA dataset", "help": "If blank, then use all available cell types.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "Repeat", "name": "cluster_groups", "type": "repeat", "title": "Cluster Groups", "help": "Insert cell cluster groups based on a previous clustering.", "default": 0, "min": 0, "max": "__Infinity__", "inputs": [{"model_class": "TextToolParameter", "name": "cluster_id", "argument": null, "type": "text", "label": "Cluster ID", "help": "e.g. C1 or Cluster1, etc.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "celltypes", "argument": null, "type": "text", "label": "Comma list of cell types to use from scRNA dataset", "help": "If blank, then use all available cell types.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "marker_name", "argument": null, "type": "text", "label": "Marker Gene Group Name", "help": "Name of the list of gene markers used to describe the marker list supplied below.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "marker_list", "argument": null, "type": "data", "label": "List of Gene Markers", "help": "A single column of marker genes", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["txt", "tabular"], "edam": {"edam_formats": ["format_2330", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}]}], "test_param": {"model_class": "SelectToolParameter", "name": "method", "argument": null, "type": "select", "label": "Purpose", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "estimateprops", "options": [["Estimate Proportions", "estimateprops", false], ["Compute Dendrogram", "dendrogram", false]], "display": null, "multiple": false, "textable": false}}], "outputs": [{"model_class": "ToolOutputCollection", "name": "props", "format": null, "label": "${tool.name} on ${on_string}: Proportion Matrices", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "list", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": "tabular", "visible": false, "assign_primary_output": false, "directory": "report_data", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "prop_(?P<designation>.+)\\.tabular", "sort_by": "filename"}]}}, {"model_class": "ToolOutputCollection", "name": "summaries", "format": null, "label": "${tool.name} on ${on_string}: Summaries and Logs", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "list", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": "txt", "visible": false, "assign_primary_output": false, "directory": "report_data", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "summ_(?P<designation>.+)\\.txt", "sort_by": "filename"}, {"discover_via": "pattern", "dbkey": "__input__", "format": "tabular", "visible": false, "assign_primary_output": false, "directory": "report_data", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "varprop_(?P<designation>.+)\\.tabular", "sort_by": "filename"}, {"discover_via": "pattern", "dbkey": "__input__", "format": "tabular", "visible": false, "assign_primary_output": false, "directory": "report_data", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "rsquared_(?P<designation>.+)\\.tabular", "sort_by": "filename"}, {"discover_via": "pattern", "dbkey": "__input__", "format": "tabular", "visible": false, "assign_primary_output": false, "directory": "report_data", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "weightgene_(?P<designation>.+)\\.tabular", "sort_by": "filename"}]}}, {"model_class": "ToolOutput", "name": "out_pdf", "format": "pdf", "label": "${tool.name} on ${on_string}: PDF Plots", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3508", "edam_data": "data_2968", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "out_tab", "format": "tabular", "label": "${tool.name} on ${on_string}: Cell Proportions by Sample", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "single-cell", "panel_section_name": "Single-cell", "form_style": "regular"}