{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/galaxyp/maldi_quant_peak_detection/maldi_quant_peak_detection/1.18.0.0", "name": "MALDIquant peak detection", "version": "1.18.0.0", "description": "Peak detection, binning and filtering for mass-spectrometry imaging data", "labels": [], "edam_operations": ["operation_3799", "operation_3860", "operation_0337", "operation_3215", "operation_3627"], "edam_topics": ["topic_0121", "topic_3520"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "maldi_quant", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "maldi_quant_peak_detection", "owner": "galaxyp", "changeset_revision": "01212bf66f61", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "infile", "argument": null, "type": "data", "label": "MS metadata", "help": "This file is in imzML or tabular format (peak list, peak detection cannot be run again)", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["imzml", "tabular"], "edam": {"edam_formats": ["format_3682", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "BooleanToolParameter", "name": "centroids", "argument": null, "type": "boolean", "label": "Is the imzML data centroided (picked)", "help": "Choose Yes if peak detection has already been done. Peak detection cannot be run again on centroided data", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "Conditional", "name": "restriction_conditional", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "restrict", "inputs": [{"model_class": "DataToolParameter", "name": "coordinates_file", "argument": null, "type": "data", "label": "Tabular file with coordinates which should be read", "help": "x-values in first column, y-values in second column", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "no_restriction", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "restriction", "argument": null, "type": "select", "label": "Restrict the preprocessing to coordinates of interest", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no_restriction", "options": [["Calculate on entire file", "no_restriction", true], ["Restrict to coordinates of interest", "restrict", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "tabular_annotation", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "yes_annotation", "inputs": [{"model_class": "DataToolParameter", "name": "annotation_file", "argument": null, "type": "data", "label": "Use annotations from tabular file", "help": "Tabular file with three columns: x values, y values and pixel annotations", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "ColumnListParameter", "name": "column_x", "argument": null, "type": "data_column", "label": "Column with x values", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false, "data_ref": "annotation_file", "numerical": false}, {"model_class": "ColumnListParameter", "name": "column_y", "argument": null, "type": "data_column", "label": "Column with y values", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false, "data_ref": "annotation_file", "numerical": false}, {"model_class": "ColumnListParameter", "name": "column_names", "argument": null, "type": "data_column", "label": "Column with pixel annotations", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false, "data_ref": "annotation_file", "numerical": false}, {"model_class": "BooleanToolParameter", "name": "tabular_header", "argument": null, "type": "boolean", "label": "Tabular file contains a header line", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}, {"model_class": "ConditionalWhen", "value": "no_annotation", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "load_annotation", "argument": null, "type": "select", "label": "Use pixel annotation from tabular file - select in peak detection or filtering step where you want to apply the annotation information", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no_annotation", "options": [["pixels belong into one group only", "no_annotation", true], ["use pixel annotation from a tabular file", "yes_annotation", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Repeat", "name": "methods", "type": "repeat", "title": "Method", "help": null, "default": 1, "min": 1, "max": "__Infinity__", "inputs": [{"model_class": "Conditional", "name": "methods_conditional", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "Peak_detection", "inputs": [{"model_class": "SelectToolParameter", "name": "peak_method", "argument": null, "type": "select", "label": "Noise estimation function", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "MAD", "options": [["MAD", "MAD", true], ["SuperSmoother", "SuperSmoother", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "halfWindowSize", "argument": null, "type": "integer", "label": "Half window size", "help": "The resulting window reaches from                              mass[currentIndex-halfWindowSize] to mass[currentIndex+halfWindowSize]                             (window size is 2*halfWindowSize+1).                             The best size differs depending on the selected smoothing method.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "20", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "snr", "argument": null, "type": "integer", "label": "Signal-to-noise-ratio", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "use_annotations", "argument": null, "type": "boolean", "label": "Generate average mass spectra for each annotation group", "help": "Spectra with same annotation are summarized, no imzML export possible", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}, {"model_class": "ConditionalWhen", "value": "monoisotopic_peaks", "inputs": [{"model_class": "FloatToolParameter", "name": "minCor", "argument": null, "type": "float", "label": "minimal correlation", "help": "double , minimal correlation between the peak pattern generated by the model and the experimental peaks in the MassPeaks object to be recognized as isotopic pattern", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.95", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "tolerance", "argument": null, "type": "float", "label": "tolerance", "help": "double, maximal relative deviation of peaks position (mass) to be considered as isotopic distance", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.0004", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "distance", "argument": null, "type": "float", "label": "distance", "help": "double, distance between two consecutive peaks in an isotopic pattern", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.00235", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "size", "argument": null, "type": "integer", "label": "size", "help": "double, size (length) of isotopic pattern, longer patterns are prefered over shorter ones", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "Binning", "inputs": [{"model_class": "FloatToolParameter", "name": "bin_tolerance", "argument": null, "type": "float", "label": "Peak binning tolerance", "help": "After the alignment the peak positions (mass) are very similar but not identical. The binning is needed to make similar peak mass values identical.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.002", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "Filtering", "inputs": [{"model_class": "FloatToolParameter", "name": "minFrequency", "argument": null, "type": "float", "label": "Remove all peaks which occur in less than minFrequency spectra", "help": "It is a relative threshold.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.25", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "minNumber", "argument": null, "type": "float", "label": "remove all peaks which occur in less than minNumber spectra", "help": "It is an absolute threshold.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "filter_annot_groups", "argument": null, "type": "boolean", "label": "Group wise filtering with pixel annotations. If not specified a single group is assumed or when filtering has been done group wise it will automatically be group wise when selecting filtering on all pixel", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "mergeWhitelists", "argument": null, "type": "boolean", "label": "mergeWhitelists", "help": "if FALSE the filtering criteria are applied groupwise. If TRUE peaks that survive the filtering in one group (level of labels) these peaks are also kept in other groups even if their frequencies are below minFrequency", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}], "test_param": {"model_class": "SelectToolParameter", "name": "method", "argument": null, "type": "select", "label": "Select the method you want to apply", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "Peak_detection", "options": [["Peak detection", "Peak_detection", false], ["Keep only monoisotopic peaks", "monoisotopic_peaks", false], ["Binning", "Binning", false], ["Filtering", "Filtering", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "BooleanToolParameter", "name": "export_processed", "argument": null, "type": "boolean", "label": "Export file as processed imzML", "help": "otherwise continuous imzML will be exported", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}], "outputs": [{"model_class": "ToolOutput", "name": "outfile_imzml", "format": "imzml", "label": "$infile.display_name peaks", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3682", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "plots", "format": "pdf", "label": "$infile.display_name peakdetection QC", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "peaks_qc_plot.pdf", "edam_format": "format_3508", "edam_data": "data_2968", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "masspeaks", "format": "tabular", "label": "$infile.display_name mass_peaks", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "intensity_matrix", "format": "tabular", "label": "intensity_matrix", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}], "panel_section_id": "proteomics", "panel_section_name": "Proteomics", "form_style": "regular"}