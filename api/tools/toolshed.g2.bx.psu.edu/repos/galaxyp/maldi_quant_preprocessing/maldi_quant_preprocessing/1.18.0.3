{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/galaxyp/maldi_quant_preprocessing/maldi_quant_preprocessing/1.18.0.3", "name": "MALDIquant preprocessing", "version": "1.18.0.3", "description": "Preprocessing of mass-spectrometry imaging data", "labels": [], "edam_operations": ["operation_3799", "operation_3860", "operation_0337", "operation_3215", "operation_3627"], "edam_topics": ["topic_0121", "topic_3520"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "maldi_quant", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "maldi_quant_preprocessing", "owner": "galaxyp", "changeset_revision": "71411ac28268", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "infile", "argument": null, "type": "data", "label": "MSI data", "help": "Input file as imzML (composite upload), or Cardinal MSImageSet saved as RData (regular upload). The file must be in profile mode, not centroided.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["imzml", "rdata", "analyze75"], "edam": {"edam_formats": ["format_3682", "format_2333", "format_2333"], "edam_data": ["data_0006", "data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "restriction_conditional", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "restrict", "inputs": [{"model_class": "DataToolParameter", "name": "coordinates_file", "argument": null, "type": "data", "label": "Tabular file with coordinates", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "ColumnListParameter", "name": "column_x", "argument": null, "type": "data_column", "label": "Column with x values", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false, "data_ref": "coordinates_file", "numerical": false}, {"model_class": "ColumnListParameter", "name": "column_y", "argument": null, "type": "data_column", "label": "Column with y values", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false, "data_ref": "coordinates_file", "numerical": false}, {"model_class": "BooleanToolParameter", "name": "coordinates_header", "argument": null, "type": "boolean", "label": "File contains a header line", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}, {"model_class": "ConditionalWhen", "value": "no_restriction", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "restriction", "argument": null, "type": "select", "label": "Use only spectra of interest", "help": "This option only works for imzML files", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no_restriction", "options": [["No, calculate on entire file", "no_restriction", true], ["Yes, restrict to spectra of interest", "restrict", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Repeat", "name": "methods", "type": "repeat", "title": "Method", "help": null, "default": 1, "min": 1, "max": "__Infinity__", "inputs": [{"model_class": "Conditional", "name": "methods_conditional", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "Transformation", "inputs": [{"model_class": "SelectToolParameter", "name": "transform_method", "argument": null, "type": "select", "label": "Transformation method", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "sqrt", "options": [["sqrt", "sqrt", true], ["log", "log", false], ["log2", "log2", false], ["log10", "log10", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "Smoothing", "inputs": [{"model_class": "Conditional", "name": "methods_for_smoothing", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "SavitzkyGolay", "inputs": [{"model_class": "TextToolParameter", "name": "polynomial", "argument": null, "type": "text", "label": "Polynomial order", "help": "Controls the order of the filter, should be smaller than the resulting window.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "MovingAverage", "inputs": [{"model_class": "BooleanToolParameter", "name": "weighted", "argument": null, "type": "boolean", "label": "Weighted average", "help": "Indicates if the average should be equal weight or if it should have weights depending on the distance from the center as calculated as 1/2^abs(-halfWindowSize:halfWindowSize) with the sum of all weigths normalized to 1", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}], "test_param": {"model_class": "SelectToolParameter", "name": "smooth_method", "argument": null, "type": "select", "label": "Smoothing method", "help": "This method smoothes the intensity values of a MassSpectrum object.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "SavitzkyGolay", "options": [["SavitzkyGolay", "SavitzkyGolay", true], ["MovingAverage", "MovingAverage", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "IntegerToolParameter", "name": "halfWindowSize", "argument": null, "type": "integer", "label": "Half window size", "help": "Number of data points, the resulting window reaches from                              mass[currentIndex-halfWindowSize] to mass[currentIndex+halfWindowSize]                             (window size is 2*halfWindowSize+1).", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "Baseline", "inputs": [{"model_class": "Conditional", "name": "methods_for_baseline", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "SNIP", "inputs": [{"model_class": "IntegerToolParameter", "name": "iterations", "argument": null, "type": "integer", "label": "Number of iterations", "help": "Corresponds to half window size: The resulting window reaches from mass[cur_index-iterations] to mass[cur_index+iterations]", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "100", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "TopHat", "inputs": [{"model_class": "IntegerToolParameter", "name": "tophat_halfWindowSize", "argument": null, "type": "integer", "label": "Half window size", "help": "Number of data points, the resulting window reaches from                              mass[currentIndex-halfWindowSize] to mass[currentIndex+halfWindowSize]", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "ConvexHull", "inputs": []}, {"model_class": "ConditionalWhen", "value": "median", "inputs": [{"model_class": "IntegerToolParameter", "name": "median_halfWindowSize", "argument": null, "type": "integer", "label": "Half window size", "help": "Number of data points, the resulting window reaches from                              mass[currentIndex-halfWindowSize] to mass[currentIndex+halfWindowSize]", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "baseline_method", "argument": null, "type": "select", "label": "Baseline removal method", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "SNIP", "options": [["SNIP", "SNIP", true], ["TopHat", "TopHat", false], ["ConvexHull", "ConvexHull", false], ["median", "median", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "ConditionalWhen", "value": "Calibrate", "inputs": [{"model_class": "SelectToolParameter", "name": "calibrate_method", "argument": null, "type": "select", "label": "Intensity calibration method", "help": "Intensity normalization", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "TIC", "options": [["TIC", "TIC", true], ["PQN", "PQN", false], ["median", "median", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "Conditional", "name": "cond_calibration_range", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "no", "inputs": []}, {"model_class": "ConditionalWhen", "value": "yes", "inputs": [{"model_class": "IntegerToolParameter", "name": "mass_start", "argument": null, "type": "integer", "label": "Start of m/z range, has to be inside m/z range", "help": "Scaling factor is calculated on the mass range and applied to the whole spectrum.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "800", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "mass_end", "argument": null, "type": "integer", "label": "End of m/z range, has to be inside m/z range", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "3000", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "calibration_range", "argument": null, "type": "select", "label": "m/z range", "help": "Instead of the whole m/z range, a specified m/z range can be used to calculate the scaling factor.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no", "options": [["complete m/z range", "no", true], ["specify a m/z range", "yes", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "ConditionalWhen", "value": "Align", "inputs": [{"model_class": "SelectToolParameter", "name": "warping_method", "argument": null, "type": "select", "label": "Alignment method", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "lowess", "options": [["Lowess", "lowess", true], ["Linear", "linear", false], ["Quadratic", "quadratic", false], ["Cubic", "cubic", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "tolerance", "argument": null, "type": "float", "label": "Tolerance", "help": "abs(mz1 - mz2)/mz2, maximal relative deviation of a peak position (m/z) to be considered as identical. For 50ppm use 0.00005 or 5e-5", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5e-05", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "halfWindowSize", "argument": null, "type": "integer", "label": "Half window size", "help": "Number of data points, the resulting window reaches from                              mass[currentIndex-halfWindowSize] to mass[currentIndex+halfWindowSize]                             (window size is 2*halfWindowSize+1).                             The best size differs depending on the selected smoothing method.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "20", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "peak_method", "argument": null, "type": "select", "label": "Noise estimation function", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "MAD", "options": [["MAD", "MAD", true], ["SuperSmoother", "SuperSmoother", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "snr", "argument": null, "type": "integer", "label": "Signal-to-noise-ratio", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "allow_nomatch", "argument": null, "type": "boolean", "label": "Allow no matches", "help": "Don't throw an error when less than 2 reference m/z were found in a spectrum", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "empty_nomatch", "argument": null, "type": "boolean", "label": "Empty no matches", "help": "If TRUE the intensity values of MassSpectrum or MassPeaks objects with missing (NA) warping functions are set to zero", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "remove_empty", "argument": null, "type": "boolean", "label": "Remove empty spectra", "help": "For Cardinal RData files this step can only be performed if pixel annotations were provided", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "Conditional", "name": "reference_for_alignment", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "no_reference", "inputs": [{"model_class": "FloatToolParameter", "name": "min_frequency", "argument": null, "type": "float", "label": "minFrequency", "help": "Removal of all peaks which occur in less than minFrequency spectra to generate the reference m/z", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.9", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "yes_reference", "inputs": [{"model_class": "DataToolParameter", "name": "reference_file", "argument": null, "type": "data", "label": "Reference m/z values", "help": "Tabular file", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "ColumnListParameter", "name": "mz_column", "argument": null, "type": "data_column", "label": "Column with m/z values", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false, "data_ref": "reference_file", "numerical": false}, {"model_class": "BooleanToolParameter", "name": "reference_header", "argument": null, "type": "boolean", "label": "File contains a header line", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "separate_alignment", "argument": null, "type": "boolean", "label": "Spectrum wise alignment", "help": "Internal binning is omitted to avoid interaction between spectra", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}], "test_param": {"model_class": "SelectToolParameter", "name": "align_ref", "argument": null, "type": "select", "label": "Reference", "help": "If given, samples will be aligned to reference, use internal calibrants to perform m/z calibration", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no_reference", "options": [["no reference", "no_reference", true], ["reference from tabular file", "yes_reference", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "ConditionalWhen", "value": "skip_preprocessing", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "method", "argument": null, "type": "select", "label": "Select a method", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "Transformation", "options": [["Transformation", "Transformation", true], ["Smoothing", "Smoothing", false], ["Baseline removal", "Baseline", false], ["Intensity calibration (normalization)", "Calibrate", false], ["Align spectra (warping/phase correction)", "Align", false], ["Skip preprocessing", "skip_preprocessing", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "BooleanToolParameter", "name": "export_processed", "argument": null, "type": "boolean", "label": "Export processed imzML", "help": "otherwise continuous imzML will be exported", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}], "outputs": [{"model_class": "ToolOutput", "name": "outfile_imzml", "format": "imzml", "label": "${tool.name} on ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3682", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "plots", "format": "pdf", "label": "${tool.name} on ${on_string}: QC", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "prepro_qc_plot.pdf", "edam_format": "format_3508", "edam_data": "data_2968", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}], "panel_section_id": "proteomics", "panel_section_name": "Proteomics", "form_style": "regular"}