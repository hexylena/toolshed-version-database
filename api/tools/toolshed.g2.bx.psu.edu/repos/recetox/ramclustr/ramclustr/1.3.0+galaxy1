{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/recetox/ramclustr/ramclustr/1.3.0+galaxy1", "name": "RAMClustR", "version": "1.3.0+galaxy1", "description": "A feature clustering algorithm for non-targeted mass spectrometric metabolomics data.", "labels": [], "edam_operations": ["operation_3557", "operation_3435", "operation_3432", "operation_3465"], "edam_topics": ["topic_3520"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "ramclustr", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "ramclustr", "owner": "recetox", "changeset_revision": "9b716db0a786", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "Conditional", "name": "filetype", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "xcms", "inputs": [{"model_class": "Section", "name": "xcms", "type": "section", "title": "Input MS Data as XCMS", "help": null, "expanded": true, "inputs": [{"model_class": "DataToolParameter", "name": "input_xcms", "argument": null, "type": "data", "label": "Input XCMS", "help": "Grouped feature data for clustering.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata.xcms.fillpeaks"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "Section", "name": "required", "type": "section", "title": "General parameters", "help": null, "expanded": true, "inputs": [{"model_class": "FloatToolParameter", "name": "st", "argument": null, "type": "float", "label": "Sigma t", "help": "Retention time similarity (optional).                            A recommended starting point is half the value of your average chromatographic peak width at half max (seconds)).", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "sr", "argument": null, "type": "float", "label": "Sigma r", "help": "Correlational similarity between features.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.5", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "cor_method", "argument": null, "type": "select", "label": "Correlation method", "help": "Choose correlational method to be used - see [1] for details.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pearson", "options": [["pearson", "pearson", true], ["spearman", "spearman", false], ["kendall", "kendall", false]], "display": "radio", "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "maxt", "argument": null, "type": "float", "label": "Maximum RT difference", "help": "Maximum difference to calculate RT similarity - values beyond this are assigned zero similarity.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "60.0", "area": false, "datalist": []}]}]}, {"model_class": "ConditionalWhen", "value": "csv", "inputs": [{"model_class": "Section", "name": "ms_csv", "type": "section", "title": "Input MS Data as CSV", "help": null, "expanded": true, "inputs": [{"model_class": "DataToolParameter", "name": "ms", "argument": null, "type": "data", "label": "Input CSV", "help": "Features as columns, rows as samples. Column header in format mz_rt.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["csv"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "idmsms", "argument": null, "type": "data", "label": "idMSMS", "help": "Optional idMSMS / MSe csv data. Same dimension and names as in input CSV are required.", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["csv"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "csv_phenoData", "argument": null, "type": "data", "label": "phenoData", "help": "Optional csv containing phenoData.", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["csv"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "Section", "name": "required", "type": "section", "title": "General parameters", "help": null, "expanded": true, "inputs": [{"model_class": "FloatToolParameter", "name": "st", "argument": null, "type": "float", "label": "Sigma t", "help": "Retention time similarity.                            A recommended starting point is half the value of your average chromatographic peak width at half max (seconds)).", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "sr", "argument": null, "type": "float", "label": "Sigma r", "help": "Correlational similarity between features.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.5", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "cor_method", "argument": null, "type": "select", "label": "Correlation method", "help": "Choose correlational method to be used - see [1] for details.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pearson", "options": [["pearson", "pearson", true], ["spearman", "spearman", false], ["kendall", "kendall", false]], "display": "radio", "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "maxt", "argument": null, "type": "float", "label": "Maximum RT difference", "help": "Maximum difference to calculate RT similarity - values beyond this are assigned zero similarity.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "60.0", "area": false, "datalist": []}]}]}, {"model_class": "ConditionalWhen", "value": "recetox-aplcms", "inputs": [{"model_class": "Section", "name": "ms_dataframe", "type": "section", "title": "Input MS Data as parquet (output from recetox-aplcms)", "help": null, "expanded": true, "inputs": [{"model_class": "DataToolParameter", "name": "ms1_featureDefinitions", "argument": null, "type": "data", "label": "Input MS1 featureDefinitions", "help": "Metadata with columns: mz, rt, feature names containing MS data.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["parquet"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "ms1_featureValues", "argument": null, "type": "data", "label": "Input MS1 featureValues", "help": "data with rownames = sample names, colnames = feature names containing MS data.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["parquet"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "df_phenoData", "argument": null, "type": "data", "label": "phenoData", "help": "CSV/TSV file containing phenoData (optional).", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tsv", "csv"], "edam": {"edam_formats": ["format_3475", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "Section", "name": "required", "type": "section", "title": "General parameters", "help": null, "expanded": true, "inputs": [{"model_class": "FloatToolParameter", "name": "st", "argument": null, "type": "float", "label": "Sigma t", "help": "Retention time similarity.                            A recommended starting point is half the value of your average chromatographic peak width at half max (seconds)).", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "sr", "argument": null, "type": "float", "label": "Sigma r", "help": "Correlational similarity between features.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.5", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "cor_method", "argument": null, "type": "select", "label": "Correlation method", "help": "Choose correlational method to be used - see [1] for details.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pearson", "options": [["pearson", "pearson", true], ["spearman", "spearman", false], ["kendall", "kendall", false]], "display": "radio", "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "maxt", "argument": null, "type": "float", "label": "Maximum RT difference", "help": "Maximum difference to calculate RT similarity - values beyond this are assigned zero similarity.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "60.0", "area": false, "datalist": []}]}]}], "test_param": {"model_class": "SelectToolParameter", "name": "type_choice", "argument": null, "type": "select", "label": "Choose input format:", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "xcms", "options": [["XCMS", "xcms", true], ["CSV", "csv", false], ["RECETOX-APLCMS", "recetox-aplcms", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "clustering", "type": "section", "title": "Clustering", "help": null, "expanded": true, "inputs": [{"model_class": "SelectToolParameter", "name": "linkage", "argument": null, "type": "select", "label": "Clustering linkage method", "help": "Choose hierarchical clustering linkage method - see [2] for details.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "average", "options": [["average", "average", true], ["ward.D", "ward.D", false], ["ward.D2", "ward.D2", false], ["single", "single", false], ["complete", "complete", false], ["mcquitty", "mcquitty", false], ["median", "median", false], ["centroid", "centroid", false]], "display": "radio", "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "minModuleSize", "argument": null, "type": "integer", "label": "Minimal cluster size", "help": "Minimal size (number of features) of a cluster.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "hmax", "argument": null, "type": "float", "label": "Maximal tree height", "help": "Cut the Hierarchical Cluster Analysis tree at this height, see [3] for details.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.3", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "deepSplit", "argument": null, "type": "boolean", "label": "Use deepSplit", "help": "Check to produce more smaller clusters, uncheck for fewer bigger clusters, see [3] for details.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}, {"model_class": "Section", "name": "normalisation", "type": "section", "title": "Normalisation", "help": null, "expanded": true, "inputs": [{"model_class": "Conditional", "name": "normalisation_method", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "batch.qc", "inputs": [{"model_class": "DataToolParameter", "name": "batch_order_qc", "argument": null, "type": "data", "label": "Metadata details", "help": "CSV with sample names (or indices, currently not handled) on rows and columns with:                            batch number ('batch'), position in sequence ('order'), and whether it is a QC sample or not                            ('qc' with true/false OR 'sampleType' with 'sample/qc/blank').", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["csv"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "IntegerToolParameter", "name": "qc_inj_range", "argument": null, "type": "integer", "label": "QC injection range", "help": "How many injections around each injection are to be scanned for presence of QC samples?                              A good rule of thumb is between 1 and 3 times the typical                              injection span between QC injections. i.e. if you inject QC ever 7 samples, set this to                              between 7 and 21. Smaller values provide more local precision but make normalization sensitive                              to individual poor outliers (though these are first removed using the boxplot function outlier                              detection), while wider values provide less local precision in normalization but better                              stability to individual peak areas.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "20", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "qc", "inputs": [{"model_class": "DataToolParameter", "name": "batch_order_qc", "argument": null, "type": "data", "label": "Metadata details", "help": "CSV with sample names (or indices, currently not handled) on rows and columns with:                            batch number ('batch'), position in sequence ('order'), and whether it is a QC sample or not                            ('qc' with true/false OR 'sampleType' with 'sample/qc/blank').", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["csv"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "FloatToolParameter", "name": "p_cut", "argument": null, "type": "float", "label": "p.cut", "help": "Numeric when run order correction is applied, only features showing a run order vs                              signal with a linear p-value (after FDR correction) < p.cut will be adjusted.  also requires                              r-squared < rsq.cut.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.05", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "rsq_cut", "argument": null, "type": "float", "label": "rsq.cut", "help": "Numeric when run order correction is applied, only features showing a run order vs signal                              with a linear r-squared > rsq.cut will be adjusted. also requires p values < p.cut.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.1", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "p_adjust", "argument": null, "type": "text", "label": "p.adjust", "help": "Which p-value adjustment should be used? one of ['holm', 'hochberg', 'hommel', 'bonferroni', 'BH',                              'BY', 'fdr', 'none']", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "none", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "none", "inputs": []}, {"model_class": "ConditionalWhen", "value": "TIC", "inputs": []}, {"model_class": "ConditionalWhen", "value": "quantile", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "normalize", "argument": null, "type": "select", "label": "Normalisation method", "help": "Choose method for normalization of feature intensities.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "none", "options": [["none", "none", true], ["TIC", "TIC", false], ["quantile", "quantile", false], ["batch.qc", "batch.qc", false], ["qc", "qc", false]], "display": "radio", "multiple": false, "textable": false}}]}, {"model_class": "Section", "name": "performance", "type": "section", "title": "Performance", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "blocksize", "argument": null, "type": "integer", "label": "Blocksize", "help": "Number of features processed in one block.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2000", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "mult", "argument": null, "type": "integer", "label": "Blocksize factor", "help": "Factor to scale blocksize to influence processing speed.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}]}, {"model_class": "Section", "name": "msp_output_details", "type": "section", "title": "MSP output", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "merge_msp", "argument": null, "type": "boolean", "label": "Merge MSP Files", "help": "Merge all MSP in one file or export one MSP per spectra.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "IntegerToolParameter", "name": "mzdec", "argument": null, "type": "integer", "label": "m/z decimal places", "help": "Number of decimal places used in printing m/z values.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "6", "area": false, "datalist": []}]}, {"model_class": "Section", "name": "extras", "type": "section", "title": "Extras", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "rt_only_low_n", "argument": null, "type": "boolean", "label": "RT only low n", "help": "At low injection numbers, correlational relationships of peak intensities may be unreliable.                    By default, RAMClustR will simply ignore the correlational Sigma r value and cluster on retention time alone.                    If you wish to use correlation with at n less than 5, set this value to FALSE.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "replace_zeros", "argument": null, "type": "boolean", "label": "Replace zeros", "help": "NA, NaN, and Inf values are replaced with zero, and zero values are sometimes returned from                    peak peaking. When TRUE, zero values will be replaced with a small amount of noise, with noise level                    set based on the detected signal intensities for that feature.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "DataToolParameter", "name": "ExpDes", "argument": null, "type": "data", "label": "Experimental design metadata", "help": "Definition of experimental design in CSV format.", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["csv"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "outputs": [{"model_class": "ToolOutputCollection", "name": "mass_spectra_collection", "format": null, "label": "Mass spectra from ${tool.name} on ${on_string} list", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "list", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": "msp", "visible": false, "assign_primary_output": false, "directory": "spectra", "recurse": true, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "(?P<name>.*)\\.(?P<ext>[^\\.]+)?", "sort_by": "filename"}]}}, {"model_class": "ToolOutput", "name": "spec_abundance", "format": "csv", "label": "Spec Abundance of ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "mass_spectra_merged", "format": "msp", "label": "Mass spectra from ${tool.name} on ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "metabolomics", "panel_section_name": "Metabolomics", "form_style": "regular"}