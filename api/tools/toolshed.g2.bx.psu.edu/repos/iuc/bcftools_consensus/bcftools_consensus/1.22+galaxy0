{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/bcftools_consensus/bcftools_consensus/1.22+galaxy0", "name": "bcftools consensus", "version": "1.22+galaxy0", "description": "Create consensus sequence by applying VCF variants to a reference fasta file", "labels": [], "icon": null, "edam_operations": ["operation_2409", "operation_3227"], "edam_topics": ["topic_3516", "topic_0199", "topic_2885", "topic_3517"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "bcftools", "type": "bio.tools"}], "tool_shed_repository": {"name": "bcftools_consensus", "owner": "iuc", "changeset_revision": "9a260f6fab93", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "input_file", "argument": null, "type": "data", "label": "VCF/BCF Data", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["vcf", "vcf_bgzip", "bcf"], "edam": {"edam_formats": ["format_3016", "format_3016", "format_3020"], "edam_data": ["data_0006", "data_0006", "data_3498"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "reference_source", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "cached", "inputs": [{"model_class": "SelectToolParameter", "name": "fasta_ref", "argument": null, "type": "select", "label": "Reference genome", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": null, "options": [], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "history", "inputs": [{"model_class": "DataToolParameter", "name": "fasta_ref", "argument": null, "type": "data", "label": "Reference genome", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fasta"], "edam": {"edam_formats": ["format_1929"], "edam_data": ["data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "reference_source_selector", "argument": null, "type": "select", "label": "Choose the source for the reference genome", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "cached", "options": [["Use a built-in genome", "cached", false], ["Use a genome from the history", "history", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "mode", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "-s -", "inputs": []}, {"model_class": "ConditionalWhen", "value": "-I -s -", "inputs": []}, {"model_class": "ConditionalWhen", "value": "", "inputs": [{"model_class": "Conditional", "name": "specify_samples", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "-s", "inputs": [{"model_class": "TextToolParameter", "name": "samples_spec", "argument": "--samples", "type": "text", "label": "Sample(s)", "help": "Specify a single sample by name or a comma-separated list of sample names.", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "invert_samples", "argument": null, "type": "boolean", "label": "Exclude these samples instead of including them?", "help": "Equivalent to prefixing the list of samples with \"^\" on the command line.", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "^", "falsevalue": ""}]}, {"model_class": "ConditionalWhen", "value": "-S", "inputs": [{"model_class": "DataToolParameter", "name": "samples_file", "argument": "--samples_file", "type": "data", "label": "Samples file", "help": "File listing samples to include one per line.", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "BooleanToolParameter", "name": "invert_samples", "argument": null, "type": "boolean", "label": "Exclude the samples listed in the file instead of including them?", "help": "Equivalent to prefixing the file with \"^\" on the command line.", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "^", "falsevalue": ""}]}, {"model_class": "ConditionalWhen", "value": "", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "how", "argument": null, "type": "select", "label": "How do you want to select samples?", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "options": [["Specify samples manually", "-s", false], ["Provide sample file", "-S", false], ["No selection; just use all samples found in input", "", true]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "ConditionalWhen", "value": "-H", "inputs": [{"model_class": "TextToolParameter", "name": "sample", "argument": null, "type": "text", "label": "Sample", "help": "The name of the single sample alleles of which should get used for the consensus sequence. This field is optional only if your input VCF dataset specifies exactly one sample.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "Conditional", "name": "haplotype", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "", "inputs": [{"model_class": "IntegerToolParameter", "name": "allele_n", "argument": null, "type": "integer", "label": "where N is", "help": "", "help_format": "html", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "pIu", "inputs": [{"model_class": "IntegerToolParameter", "name": "allele_n", "argument": null, "type": "integer", "label": "where N is", "help": "", "help_format": "html", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "R", "inputs": []}, {"model_class": "ConditionalWhen", "value": "A", "inputs": []}, {"model_class": "ConditionalWhen", "value": "LR", "inputs": []}, {"model_class": "ConditionalWhen", "value": "LA", "inputs": []}, {"model_class": "ConditionalWhen", "value": "SR", "inputs": []}, {"model_class": "ConditionalWhen", "value": "SA", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "rule", "argument": null, "type": "select", "label": "From the selected sample's genotype use ...'", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "options": [["the Nth allele (for both phased and unphased genotypes) (-H N)", "", false], ["the Nth allele if the genotype is phased, the IUPAC code representing the genotype if it's unphased (-H NpIu)", "pIu", false], ["the ALT allele where the sample is homozygous, the REF allele otherwise (-H R)", "R", false], ["the ALT allele where the sample is homozygous or heterozygous (-H A)", "A", false], ["the ALT allele where the sample is homozygous, the REF allele where it's heterozygous unless the ALT allele is longer (-H LR)", "LR", false], ["the ALT allele where the sample is homozygous, the ALT allele where it's heterozygous unless the REF allele is longer (-H LA)", "LA", false], ["the ALT allele where the sample is homozygous, the REF allele where it's heterozygous unless the ALT allele is shorter (-H SR", "SR", false], ["the ALT allele where the sample is homozygous, the ALT allele where it's heterozygous unless the REF allele is shorter (-H SA)", "SA", false]], "display": null, "multiple": false, "textable": false}}]}], "test_param": {"model_class": "SelectToolParameter", "name": "select", "argument": null, "type": "select", "label": "Consensus building mode; at each variant site ...", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "options": [["ignore any sample genotypes; incorporate first allele from ALT column (-s -)", "-s -", false], ["ignore any sample genotypes; incorporate IUPAC code representing all alleles from REF/ALT coulmns (-I -s -)", "-I -s -", false], ["incorporate IUPAC code representing the genotypes of all selected samples (default)", "", true], ["incorporate specific haplotype allele of one selected sample", "-H", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "masking_options", "type": "section", "title": "Masking and marking options", "help": "The various options in this section are applied in the order they appear, i.e. 1) masking, 2) marking of absent sites, 3) SNV/indel marking.", "expanded": false, "inputs": [{"model_class": "DataToolParameter", "name": "mask", "argument": "--mask", "type": "data", "label": "Mask", "help": "Replace regions according to the next --mask-with option", "help_format": "html", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "mask_with", "argument": "--mask-with", "type": "text", "label": "Mask with", "help": "Replace with CHAR (skips overlapping variants; default: N); use \"uc\" or \"lc\" to change to uppercase or lowercase, respectively. If you have provided more than one Mask dataset and you would like to apply a unique mask for the regions in each of them, then you can specify a comma-separated list of masking instructions (as many as mask datasets).", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "absent", "argument": "--absent", "type": "text", "label": "Mark absent", "help": "Replace reference bases at positions absent from the VCF input with a custom character.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "mark_del", "argument": "--mark-del", "type": "text", "label": "Mark deletions", "help": "Instead of removing the reference base at deleted positions, replace the base with a custom character.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "insertions", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "", "inputs": []}, {"model_class": "ConditionalWhen", "value": "--mark-ins uc", "inputs": []}, {"model_class": "ConditionalWhen", "value": "--mark-ins lc", "inputs": []}, {"model_class": "ConditionalWhen", "value": "--mark-ins", "inputs": [{"model_class": "TextToolParameter", "name": "ins_cutom", "argument": null, "type": "text", "label": "Character to use instead of an inserted base", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "mark_ins", "argument": "--mark-ins", "type": "select", "label": "Mark insertions", "help": "Highlight insertions in uppercase or lowercase, or by using a fixed character instead of inserted bases, leaving the rest as is", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "options": [["Do not mark insertions", "", false], ["Uppercase (uc)", "--mark-ins uc", false], ["Lowercase (lc)", "--mark-ins lc", false], ["Custom character", "--mark-ins", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "snvs", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "", "inputs": []}, {"model_class": "ConditionalWhen", "value": "--mark-snv uc", "inputs": []}, {"model_class": "ConditionalWhen", "value": "--mark-snv lc", "inputs": []}, {"model_class": "ConditionalWhen", "value": "--mark-snv", "inputs": [{"model_class": "TextToolParameter", "name": "snv_custom", "argument": null, "type": "text", "label": "Character to use instead of a subtituted base", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "mark_snv", "argument": "--mark-snv", "type": "select", "label": "Mark substitutions", "help": "Highlight substitutions in uppercase or lowercase, or by using a fixed character instead of substituted bases, leaving the rest as is", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "options": [["Do not mark substitutions", "", false], ["Uppercase (uc)", "--mark-snv uc", false], ["Lowercase (lc)", "--mark-snv lc", false], ["Custom character", "--mark-snv", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "Section", "name": "sec_restrict", "type": "section", "title": "Restrict to", "help": null, "expanded": false, "inputs": [{"model_class": "TextToolParameter", "name": "include", "argument": "--include", "type": "text", "label": "Include", "help": "Select sites for which the expression is true", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "exclude", "argument": "--exclude", "type": "text", "label": "Exclude", "help": "Exclude sites for which the expression is true", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "Conditional", "name": "regions", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "__none__", "inputs": []}, {"model_class": "ConditionalWhen", "value": "regions", "inputs": [{"model_class": "Repeat", "name": "region_specs", "type": "repeat", "title": "Region Filter", "help": null, "default": 1, "min": 1, "max": "__Infinity__", "inputs": [{"model_class": "TextToolParameter", "name": "chrom", "argument": null, "type": "text", "label": "Region chromosome", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "start", "argument": null, "type": "text", "label": "Region start position", "help": "", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "stop", "argument": null, "type": "text", "label": "Region end position", "help": "", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "SelectToolParameter", "name": "regions_overlap", "argument": "--regions-overlap", "type": "select", "label": "Consider variant calls with partial overlap with Region(s) if ...", "help": "Set to 0 if the record has to have POS inside a region; set to 1 if also overlapping records with POS outside a region should be included (this includes indels with POS at the end of a region, which are technically outside the region); or set to 2 to include only true overlapping variation (compare the full VCF representation 'TA>T-' vs the true sequence variation 'A>-').", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "options": [["0: the variant's POS falls in the region", "0", false], ["1: any part of the variant's representation overlaps the region", "1", true], ["2: the variant's actual sequence change falls in the region", "2", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "regions_file", "inputs": [{"model_class": "DataToolParameter", "name": "regions_file", "argument": null, "type": "data", "label": "Regions File", "help": "restrict to Regions listed in a file", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "SelectToolParameter", "name": "regions_overlap", "argument": "--regions-overlap", "type": "select", "label": "Region overlap", "help": "Include if POS in the region (0), record overlaps (1), variant overlaps (2)", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "options": [["0: POS in the region", "0", false], ["1: Record overlaps", "1", true], ["2: Variant overlaps", "2", false]], "display": null, "multiple": false, "textable": false}]}], "test_param": {"model_class": "SelectToolParameter", "name": "regions_src", "argument": null, "type": "select", "label": "Restrict consensus building to only specified regions of reference?", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "__none__", "options": [["Do not restrict to Regions", "__none__", false], ["Specify one or more Region(s) directly", "regions", false], ["Operate on Regions specified in a history dataset", "regions_file", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "BooleanToolParameter", "name": "chain", "argument": null, "type": "boolean", "label": "Write a chain file for liftover", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "yes", "falsevalue": "no"}, {"model_class": "BooleanToolParameter", "name": "rename", "argument": null, "type": "boolean", "label": "Set output FASTA ID from name of VCF", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "yes", "falsevalue": "no"}], "outputs": [{"model_class": "ToolOutput", "name": "output_file", "format": "fasta", "label": "${tool.name} on ${on_string}: consensus fasta", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_1929", "edam_data": "data_2044", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "chain_file", "format": "txt", "label": "${tool.name} on ${on_string}: chain", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "variant_calling", "panel_section_name": "Variant Calling", "form_style": "regular"}