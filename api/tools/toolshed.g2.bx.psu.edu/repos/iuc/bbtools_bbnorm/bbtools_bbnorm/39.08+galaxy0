{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/bbtools_bbnorm/bbtools_bbnorm/39.08+galaxy0", "name": "BBTools: BBNorm", "version": "39.08+galaxy0", "description": "Normalise sequencing coverage", "labels": [], "edam_operations": ["operation_0496", "operation_0491"], "edam_topics": ["topic_0622", "topic_0091"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "bbtools", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "bbtools_bbnorm", "owner": "iuc", "changeset_revision": "770bceda7785", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "Conditional", "name": "input_type_cond", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "single_end", "inputs": [{"model_class": "DataToolParameter", "name": "read1", "argument": null, "type": "data", "label": "Single-end data", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastqsanger", "fastqsanger.gz"], "edam": {"edam_formats": ["format_1932", "format_1932"], "edam_data": ["data_2044", "data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "PE_1file", "inputs": [{"model_class": "DataToolParameter", "name": "read1", "argument": null, "type": "data", "label": "Interleaved paired-end data", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastqsanger", "fastqsanger.gz"], "edam": {"edam_formats": ["format_1932", "format_1932"], "edam_data": ["data_2044", "data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "PE_2files", "inputs": [{"model_class": "DataToolParameter", "name": "read1", "argument": null, "type": "data", "label": "Forward reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastqsanger", "fastqsanger.gz"], "edam": {"edam_formats": ["format_1932", "format_1932"], "edam_data": ["data_2044", "data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "read2", "argument": null, "type": "data", "label": "Reverse reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastqsanger", "fastqsanger.gz"], "edam": {"edam_formats": ["format_1932", "format_1932"], "edam_data": ["data_2044", "data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "paired", "inputs": [{"model_class": "DataCollectionToolParameter", "name": "reads_collection", "argument": null, "type": "data_collection", "label": "Collection of forward and reverse reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "collection_types": ["paired"], "extensions": ["fastqsanger", "fastqsanger.gz"], "multiple": false, "options": {"hda": [], "hdca": [], "dce": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "input_type", "argument": null, "type": "select", "label": "Choose the category of inputs to be analyzed", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "PE_2files", "options": [["Single-end reads", "single_end", false], ["Paired-end reads as a single, interleaved dataset", "PE_1file", false], ["Paired-end reads as two separate datasets", "PE_2files", true], ["Paired-end reads as a collection", "paired", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "IntegerToolParameter", "name": "target", "argument": "target", "type": "integer", "label": "Target normalization depth", "help": "All depth parameters control kmer depth, not read depth. For kmer depth Dk, read depth Dr, read length R, and kmer size K: Dr=Dk*(R/(R-K+1))", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "100", "area": false, "datalist": []}, {"model_class": "Section", "name": "norm_params", "type": "section", "title": "Normalization parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "maxdepth", "argument": "maxdepth", "type": "integer", "label": "Reads will not be downsampled when below this depth, even if they are above the target depth.", "help": "All depth parameters control kmer depth, not read depth. For kmer depth Dk, read depth Dr, read length R, and kmer size K: Dr=Dk*(R/(R-K+1))", "refresh_on_change": false, "min": -1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "-1", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "mindepth", "argument": "mindepth", "type": "integer", "label": "kmers with depth below this number will not be included when calculating the depth of a read.", "help": "All depth parameters control kmer depth, not read depth. For kmer depth Dk, read depth Dr, read length R, and kmer size K: Dr=Dk*(R/(R-K+1))", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "minkmers", "argument": "minkmers", "type": "integer", "label": "Reads must have at least this many kmers over min depth to be retained.", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "15", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "percentile", "argument": "percentile", "type": "integer", "label": "Percentile to infer read depth", "help": "Read depth is by default inferred from the 54th percentile of kmer depth, but this may be changed to any number 1-100.", "refresh_on_change": false, "min": 1, "max": 100, "optional": false, "hidden": false, "is_dynamic": false, "value": "54", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "uselowerdepth", "argument": "uselowerdepth", "type": "boolean", "label": "For pairs, use the depth of the lower read as the depth proxy.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "deterministic", "argument": "deterministic", "type": "boolean", "label": "Generate random numbers deterministically", "help": "This would ensure identical output between multiple runs. May decrease speed with a huge number of threads.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "fixspikes", "argument": "fixspikes", "type": "boolean", "label": "Do a slower, high-precision bloom filter lookup of kmers that appear to have an abnormally high depth due to collisions.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "IntegerToolParameter", "name": "passes", "argument": "passes", "type": "integer", "label": "Number of passes to perform", "help": " pass is the basic mode. 2 passes allows greater accuracy, error detection, better contol of output depth.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}]}, {"model_class": "Section", "name": "hashing_params", "type": "section", "title": "Hashing parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "k", "argument": "k", "type": "integer", "label": "kmer length", "help": "Values under 32 are most efficient, but arbitrarily high values are supported.", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "31", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "bits", "argument": "bits", "type": "select", "label": "Bits per cell in bloom filter", "help": "Maximum kmer depth recorded is 2^c bits. Large values decrease accuracy for a fixed amount of memory, so use the lowest number you can that will still capture highest-depth kmers.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "16", "options": [["2", "2", false], ["4", "4", false], ["8", "8", false], ["16", "16", true], ["32", "32", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "hashes", "argument": "hashes", "type": "integer", "label": "Number of times each kmer is hashed and stored.", "help": "Higher is slower. Higher is more accurate if there is enough memory, but less accurate if there is not enough memory.", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "prefilter", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "false", "inputs": []}, {"model_class": "ConditionalWhen", "value": "true", "inputs": [{"model_class": "IntegerToolParameter", "name": "prehashes", "argument": "prehashes", "type": "integer", "label": "Number of hashes for the prefilter", "help": "", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "prefilterbits", "argument": "prefilterbits", "type": "integer", "label": "Bits per cell in prefilter", "help": "", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "prefiltersize", "argument": "prefiltersize", "type": "float", "label": "Fraction of memory to allocate for the prefilter.", "help": "", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.35", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "prefilter", "argument": "prefilter", "type": "select", "label": "Use a prefilter to eliminate low-depth kmers", "help": "True is slower, but generally more accurate; filters out low-depth kmers from the main hashtable. The prefilter is more memory-efficient because it uses 2-bit cells.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "false", "options": [["Yes", "true", false], ["No", "false", true]], "display": null, "multiple": false, "textable": false}}, {"model_class": "IntegerToolParameter", "name": "buildpasses", "argument": "buildpasses", "type": "integer", "label": "Number of passes", "help": "More passes can sometimes increase accuracy by iteratively removing low-depth kmers", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "minq", "argument": "minq", "type": "integer", "label": "Ignore kmers containing bases with quality below this threshold", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "6", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "minprob", "argument": "minprob", "type": "float", "label": "Ignore kmers with overall probability of correctness below this threshold", "help": "", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.5", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "rdk", "argument": "rdk", "type": "boolean", "label": "Remove duplicate kmers", "help": "When true, a kmer's count will only be incremented once per read pair, even if that kmer occurs more than once.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "true", "falsevalue": "false"}]}, {"model_class": "Section", "name": "error_det_params", "type": "section", "title": "Error detection parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "hdp", "argument": "hdp", "type": "integer", "label": "highdepthpercentile", "help": "Position in sorted kmer depth array used as proxy of a read's high kmer depth.", "refresh_on_change": false, "min": 0, "max": 100, "optional": false, "hidden": false, "is_dynamic": false, "value": "90", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "ldp", "argument": "ldp", "type": "integer", "label": "lowdepthpercentile", "help": "Position in sorted kmer depth array used as proxy of a read's low kmer depth.", "refresh_on_change": false, "min": 0, "max": 100, "optional": false, "hidden": false, "is_dynamic": false, "value": "25", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "tossbadreads", "argument": "tossbadreads", "type": "boolean", "label": "Throw away reads detected as containing errors.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "requirebothbad", "argument": "requirebothbad", "type": "boolean", "label": "Only toss bad pairs if both reads are bad.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "IntegerToolParameter", "name": "errordetectratio", "argument": "errordetectratio", "type": "integer", "label": "Error detection ratio", "help": "Reads with a ratio of at least this much between their high and low depth kmers will be classified as error reads.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "125", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "highthresh", "argument": "highthresh", "type": "integer", "label": "Threshold for high kmer", "help": "A high kmer at this or above are considered non-error.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "12", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "lowthresh", "argument": "lowthresh", "type": "integer", "label": "Threshold for low kmer", "help": "Kmers at this and below are always considered errors.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}]}, {"model_class": "Section", "name": "error_corr_params", "type": "section", "title": "Error correction parameters", "help": null, "expanded": false, "inputs": [{"model_class": "Conditional", "name": "ecc", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "false", "inputs": []}, {"model_class": "ConditionalWhen", "value": "true", "inputs": [{"model_class": "IntegerToolParameter", "name": "ecclimit", "argument": "ecclimit", "type": "integer", "label": "Correct up to this many errors per read.", "help": "If more are detected, the read will remain unchanged.", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "errorcorrectratio", "argument": "errorcorrectratio", "type": "integer", "label": "Depth ratio", "help": "Adjacent kmers with a depth ratio of at least this much between will be classified as an error.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "140", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "echighthresh", "argument": "echighthresh", "type": "integer", "label": "Threshold for high kmer", "help": "A kmer at this or above may be considered non-error.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "22", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "eclowthresh", "argument": "eclowthresh", "type": "integer", "label": "Threshold for low kmer.", "help": "kmers at this depth or below will be considered as errors.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "eccmaxqual", "argument": "eccmaxqual", "type": "integer", "label": "Do not correct bases with quality above this value.", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "127", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "meo", "argument": "meo", "type": "boolean", "label": "Marks errors by reducing quality value of suspected errors; does not correct anything.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "mue", "argument": "mue", "type": "boolean", "label": "Mark errors only on uncorrectable reads.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "overlap", "argument": "overlap", "type": "boolean", "label": "Correct errors by read overlap.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}]}], "test_param": {"model_class": "SelectToolParameter", "name": "ecc", "argument": "ecc", "type": "select", "label": "What should be done with detected errors?", "help": "Tadpole is now preferred for error correction, as it does a better job.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "false", "options": [["Correct errors when possible", "true", false], ["Do not attempt to correct errors", "false", true]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "Section", "name": "output_options", "type": "section", "title": "Output options", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "save_discarded_reads", "argument": null, "type": "boolean", "label": "Save the reads that were eliminated from the input datasets to the history", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "save_kmer_hists", "argument": null, "type": "boolean", "label": "Save the kmer histograms (in tabular format) for the input and output datasets to the history", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}]}], "outputs": [{"model_class": "ToolOutputCollection", "name": "output_pair", "format": null, "label": "${tool.name} on ${on_string} (normalised reads)", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "paired", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": []}}, {"model_class": "ToolOutput", "name": "output_normalised_R1", "format": "data", "label": "${tool.name} on ${on_string} (normalised R1 reads)", "hidden": false, "output_type": "data", "format_source": "read1", "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "normalised_R1.fastq", "edam_format": "format_1915", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_normalised_R2", "format": "data", "label": "${tool.name} on ${on_string} (normalised R2 reads)", "hidden": false, "output_type": "data", "format_source": "read2", "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "normalised_R2.fastq", "edam_format": "format_1915", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_discarded", "format": "fastqsanger", "label": "${tool.name} on ${on_string} (discarded reads)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "discarded.fastq", "edam_format": "format_1932", "edam_data": "data_2044", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "kmer_hist_input", "format": "tabular", "label": "${tool.name} on ${on_string} (kmer histogram input)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "kmer_hist_input.tabular", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "kmer_hist_output", "format": "tabular", "label": "${tool.name} on ${on_string} (kmer histogram output)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "kmer_hist_output.tabular", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "bbtools", "panel_section_name": "BBTools", "form_style": "regular"}