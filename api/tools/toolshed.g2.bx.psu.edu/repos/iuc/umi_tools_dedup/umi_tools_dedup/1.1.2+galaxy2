{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/umi_tools_dedup/umi_tools_dedup/1.1.2+galaxy2", "name": "UMI-tools deduplicate", "version": "1.1.2+galaxy2", "description": "Extract UMI from fastq files", "labels": [], "edam_operations": ["operation_3218"], "edam_topics": ["topic_0160", "topic_3168", "topic_3393"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "umi-tools", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "umi_tools_dedup", "owner": "iuc", "changeset_revision": "f1d33e4c7bd8", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "input", "argument": null, "type": "data", "label": "Reads to deduplicate in SAM or BAM format", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["sam", "bam"], "edam": {"edam_formats": ["format_2573", "format_2572"], "edam_data": ["data_0863", "data_0863"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "BooleanToolParameter", "name": "output_stats_bool", "argument": null, "type": "boolean", "label": "Output UMI related statistics files?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "Section", "name": "gd", "type": "section", "title": "group/dedup specific options", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "buffer_whole_contig", "argument": "--buffer-whole-contig", "type": "boolean", "label": "Read whole contig before outputting bundles", "help": "Guarantees that no reads are missed, but increases memory usage", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--buffer-whole-contig", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "whole_contig", "argument": "--whole-contig", "type": "boolean", "label": "Consider all alignments to a single contig together", "help": "This is useful if you have aligned to a transcriptome multi-fasta", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--whole-contig", "falsevalue": ""}, {"model_class": "SelectToolParameter", "name": "multimapping_detection_method", "argument": "--multimapping-detection-method", "type": "select", "label": "BAM Tag indicating multimapping ", "help": "Some aligners identify multimapping using bam tags. Setting this option to NH, X0 or XT will use these tags when selecting the best read amongst reads with the same position and umi", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "options": [["NH", "NH", false], ["X0", "X0", false], ["XT", "XT", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "Conditional", "name": "bc", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "read_id", "inputs": [{"model_class": "TextToolParameter", "name": "umi_separator", "argument": "--umi-separator", "type": "text", "label": "Delimiter between read id and the UMI", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "_", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "tag", "inputs": [{"model_class": "TextToolParameter", "name": "umi_tag", "argument": "--umi-tag", "type": "text", "label": "Tag which contains the UMI", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "RX", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "umi_tag_split", "argument": "--umi-tag-split", "type": "text", "label": "Separate the UMI in tag by SPLIT", "help": "and take the first element", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "umi_tag_delimiter", "argument": "--umi-tag-delimiter", "type": "text", "label": "Separate the UMI in tag by DELIMITER", "help": "and concatenate the elements", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "cell_tag", "argument": "--cell-tag", "type": "text", "label": "Tag which contains the cell barcode", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "cell_tag_split", "argument": "--cell-tag-split", "type": "text", "label": "Separate the cell barcode in tag by SPLIT", "help": "and take the first element", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "cell_tag_delimiter", "argument": "--cell-tag-delimiter", "type": "text", "label": "Separate the cell barcode in tag by DELIMITER", "help": "and concatenate the elements", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "umis", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "extract_umi_method", "argument": "--extract-umi-method", "type": "select", "label": "Umi Extract Method", "help": "How are the barcodes encoded in the read?", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "read_id", "options": [["Barcodes are contained at the end of the read seperated by a delimiter", "read_id", true], ["Barcodes are contained in tags", "tag", false], ["Barcodes were extracted using umis", "umis", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "umi", "type": "section", "title": "UMI grouping options", "help": null, "expanded": false, "inputs": [{"model_class": "SelectToolParameter", "name": "method", "argument": "--method", "type": "select", "label": "Method used to identify PCR duplicates within reads", "help": "All methods start by identifying the reads with the same mapping position", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "unique", "options": [["Reads group share the exact same UMI", "unique", false], ["Reads group share the exact same UMI. UMIs with counts less than 1% of the median counts for UMIs at the same position are ignored", "percentile", false], ["Identify clusters based on hamming distance", "cluster", false], ["Identify clusters based on hamming distance and resolve networks by using the node counts", "adjacency", false], ["Identify clusters based on distance and counts, restrict network expansion by threshold", "directional", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "edit_distance_threshold", "argument": "--edit-distance-threshold", "type": "integer", "label": "Edit distance threshold", "help": "For the adjacency and cluster methods the threshold for the edit distance to connect two UMIs in the network can be increased. The default value of 1 works best unless the UMI is very long (>14bp)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "spliced_is_unique", "argument": "--spliced-is-unique", "type": "boolean", "label": "Spliced reads are unique", "help": "Causes two reads that start in the same position on the same strand and having the same UMI to be considered unique if one is spliced and the other is not. (Uses the 'N' cigar operation to test for splicing)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--spliced-is-unique", "falsevalue": ""}, {"model_class": "IntegerToolParameter", "name": "soft_clip_threshold", "argument": "--soft-clip-threshold", "type": "integer", "label": "Soft clip threshold", "help": "Mappers that soft clip, will sometimes do so rather than mapping a spliced read if there is only a small overhang over the exon junction. By setting this option, you can treat reads with at least this many bases soft-clipped at the 3' end as spliced", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "4", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "read_length", "argument": "--read-length", "type": "boolean", "label": "Use the read length as as a criterion when deduping", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--read-length", "falsevalue": ""}]}, {"model_class": "Section", "name": "sambam", "type": "section", "title": "SAM/BAM options", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "mapping_quality", "argument": "--mapping-quality", "type": "integer", "label": "Minimum mapping quality for a read to be retained", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "unmapped_reads", "argument": "--unmapped-reads", "type": "select", "label": "How to handle unmapped reads", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "discard", "options": [["discard", "discard", false], ["use", "use", false], ["correct", "correct", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "chimeric_pairs", "argument": "--chimeric-pairs", "type": "select", "label": "How to handle chimeric read pairs (default: use)", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "options": [["discard", "discard", false], ["use", "use", false], ["correct", "correct", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "unpaired_reads", "argument": "--unpaired-reads", "type": "select", "label": "How to handle unpaired reads (default: use)", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "options": [["discard", "discard", false], ["use", "use", false], ["correct", "correct", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "BooleanToolParameter", "name": "ignore_umi", "argument": "--ignore-umi", "type": "boolean", "label": "Ignore UMI and dedup only on position", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--ignore-umi", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "ignore_tlen", "argument": "--ignore-tlen", "type": "boolean", "label": "Dedup paired end reads based solely on read1", "help": "whether or not the template length is the same", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--ignore-tlen", "falsevalue": ""}, {"model_class": "TextToolParameter", "name": "chrom", "argument": "--chrom", "type": "text", "label": "Consider only chromosome", "help": "If a value is given only a single chromosome with the given name is considered", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "subset", "argument": "--subset", "type": "float", "label": "Only consider a random selection of the reads", "help": "", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "paired", "argument": "--paired", "type": "boolean", "label": "BAM is paired end", "help": "This will also force the use of the template length to determine reads with the same mapping coordinates", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--paired", "falsevalue": ""}]}, {"model_class": "Section", "name": "sc", "type": "section", "title": "Single-cell RNA-Seq options", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "per_gene", "argument": "--per-gene", "type": "boolean", "label": "Deduplicate per gene", "help": "Must combine with either --gene-tag or --per-contig. As for --per-contig except with this option you can align to a reference transcriptome with more than one transcript per gene. You need to also provide a map of genes to transcripts. This will also add a metacontig ('MC') tag to the output BAM file", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--per-gene", "falsevalue": ""}, {"model_class": "TextToolParameter", "name": "gene_tag", "argument": "--gene-tag", "type": "text", "label": "Deduplicate by this gene tag", "help": "As --per-gene except here the gene information is encoded in the bam read tag specified so you do not need to supply the mapping file", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "assigned_status_tag", "argument": "--assigned-status-tag", "type": "text", "label": "Bam tag describing whether read is assigned to a gene", "help": "By default, this is set as the same tag as --gene-tag", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "skip_tags_regex", "argument": "--skip-tags-regex", "type": "text", "label": "Skip any reads where the gene matches this tag", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "per_contig", "argument": "--per-contig", "type": "boolean", "label": "Deduplicate per contig", "help": "Field 3 in BAM; RNAME. All reads with the same contig will be considered to have the same alignment position. This is useful if your library prep generates PCR duplicates with non identical alignment positions such as CEL-Seq. In this case, you would align to a reference transcriptome with one transcript per gene", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--per-contig", "falsevalue": ""}, {"model_class": "DataToolParameter", "name": "gene_transcript_map", "argument": "--gene-transcript-map", "type": "data", "label": "Tabular file mapping genes to transripts", "help": "", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "BooleanToolParameter", "name": "per_cell", "argument": "--per-cell", "type": "boolean", "label": "Group reads only if they have the same cell barcode", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--per-cell", "falsevalue": ""}]}, {"model_class": "Section", "name": "advanced", "type": "section", "title": "Extra parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "random_seed", "argument": "--random-seed", "type": "integer", "label": "Random Seed", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "BooleanToolParameter", "name": "log", "argument": "--log", "type": "boolean", "label": "Output log?", "help": "Choose if you want to generate a text file containing logging information", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--log", "falsevalue": ""}], "outputs": [{"model_class": "ToolOutputCollection", "name": "output_stats", "format": null, "label": "${tool.name} on ${on_string} stats", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "list", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": []}}, {"model_class": "ToolOutput", "name": "output", "format": "bam", "label": "", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2572", "edam_data": "data_0863", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "out_log", "format": "txt", "label": "${tool.name} on ${on_string}: logfile", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "fasta_fastq", "panel_section_name": "FASTA/FASTQ", "form_style": "regular"}