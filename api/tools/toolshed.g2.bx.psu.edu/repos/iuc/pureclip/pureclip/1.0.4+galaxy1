{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/pureclip/pureclip/1.0.4", "name": "PureCLIP", "version": "1.0.4", "description": "- HMM based peak caller designed for eCLIP/iCLIP data", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "pureclip", "owner": "iuc", "changeset_revision": "fd1f57782683", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "target_bam_file", "argument": "-i", "type": "data", "label": "Target BAM file", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam"], "edam": {"edam_formats": ["format_2572"], "edam_data": ["data_0863"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "genome_fasta_file", "argument": "-g", "type": "data", "label": "Genome reference file", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fasta"], "edam": {"edam_formats": ["format_1929"], "edam_data": ["data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "learn_params_contigs", "argument": "-iv", "type": "text", "label": "Genomic chromosomes to learn HMM parameters", "help": "Genomic chromosomes to learn HMM parameters, e.g. 'chr1;chr2;chr3'. Contigs have to be in the same order as in BAM file. Useful to reduce runtime and memory consumption. Default: all contigs from reference file are used (useful when applying to transcript-wise alignments or poor data).", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "apply_hmm_contigs", "argument": "-chr", "type": "text", "label": "Contigs to apply HMM", "help": "Contigs to apply HMM, e.g. 'chr1;chr2;chr3;'. Contigs have to be in the same order as in BAM file.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "merge_dist", "argument": "-dm", "type": "integer", "label": "Distance used to merge individual crosslink sites to binding regions", "help": "", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "8", "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "control_bam_file", "argument": "-ibam", "type": "data", "label": "BAM file containing mapped reads from control experiment", "help": "Mapped reads in BAM format from a control experiment, e.g. eCLIP input", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam"], "edam": {"edam_formats": ["format_2572"], "edam_data": ["data_0863"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "motif_data", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "no_CL_motifs_available", "inputs": []}, {"model_class": "ConditionalWhen", "value": "supply_CL_motifs", "inputs": [{"model_class": "DataToolParameter", "name": "cl_motif_bed_file", "argument": "-fis", "type": "data", "label": "FIMO input motif score covariates file", "help": "FIMO input motif score covariates file", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bed"], "edam": {"edam_formats": ["format_3003"], "edam_data": ["data_3002"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "IntegerToolParameter", "name": "max_motif_id", "argument": "-nim", "type": "integer", "label": "Max. motif ID to use", "help": "Max. motif ID to use (Default: only covariates with motif ID 1 are used)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "motif_data_selector", "argument": null, "type": "select", "label": "Crosslink-associated (CL) motif options", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no_CL_motifs_available", "options": [["No CL motifs available", "no_CL_motifs_available", true], ["Supply CL motifs", "supply_CL_motifs", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "bc_data", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "bc_0", "inputs": []}, {"model_class": "ConditionalWhen", "value": "bc_1", "inputs": []}, {"model_class": "ConditionalWhen", "value": "manual_setting", "inputs": [{"model_class": "IntegerToolParameter", "name": "bandwidth", "argument": "-bw", "type": "integer", "label": "Bandwidth for kernel density estimation used to access enrichment", "help": "NOTE: Increasing the bandwidth increases runtime and memory consumption", "refresh_on_change": false, "min": 1, "max": 500, "optional": false, "hidden": false, "is_dynamic": false, "value": "50", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "bandwidthn", "argument": "-bwn", "type": "integer", "label": "Bandwidth for kernel density estimation used to estimate n for binomial distributions", "help": "For proteins that rather slide along the RNA or show long crosslink clusters increase -bwn, e.g. to 100 (should be LE 4*bw)", "refresh_on_change": false, "min": 1, "max": 500, "optional": false, "hidden": false, "is_dynamic": false, "value": "50", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "b1p", "argument": "-b1p", "type": "float", "label": "Initial value for binomial probability parameter of 'non-crosslink' state", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.01", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "b2p", "argument": "-b2p", "type": "float", "label": "Initial value for binomial probability parameter of 'crosslink' state", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.15", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "antp_option", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "antp_select", "inputs": []}, {"model_class": "ConditionalWhen", "value": "manual_select", "inputs": [{"model_class": "IntegerToolParameter", "name": "ntp", "argument": "-ntp", "type": "integer", "label": "Only sites with n >= ntp are used to learn binomial probability parameters", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "ntp2", "argument": "-ntp2", "type": "integer", "label": "Only sites with n >= ntp2 are used to learn probability of transition from state '2' to '2' or '3'", "help": "Useful for data with low truncation rates at crosslink sites or in general high fraction of non-coinciding read starts", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "antp_option_selector", "argument": null, "type": "select", "label": "Choose n threshold for estimating crosslink state parameters", "help": "Either automatically choose n threshold (-ntp, -ntp2) to estimate parameters linked to crosslink states based on expected read start count at crosslink sites, or manually set values", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "antp_select", "options": [["Automatically choose n threshold (-ntp, -ntp2)", "antp_select", true], ["Manually set -ntp, -ntp2", "manual_select", false]], "display": null, "multiple": false, "textable": false}}]}], "test_param": {"model_class": "SelectToolParameter", "name": "bc_data_selector", "argument": null, "type": "select", "label": "Define protein binding characteristics", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "bc_0", "options": [["RBP with short defined binding regions (-bc 0)", "bc_0", true], ["RBP with larger crosslink clusters and lower read start counts (-bc 1)", "bc_1", false], ["Manual setting", "manual_setting", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "advanced_params", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "ap_not_specify", "inputs": []}, {"model_class": "ConditionalWhen", "value": "ap_specify", "inputs": [{"model_class": "BooleanToolParameter", "name": "ld_precision", "argument": null, "type": "boolean", "label": "Use higher precision to compute emission probabilities (long double)", "help": "Useful in cases of extreme outliers, e.g. extreme high read start counts whose emission probabilities are close to zero and which would be discarded in default setting (along with warning messages). Note: increases memory consumption. Use in combination with '-iv' (default: double)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-ld", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "use_viterbi", "argument": null, "type": "boolean", "label": "Use Viterbi instead of posterior decoding", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-vtb", "falsevalue": ""}, {"model_class": "IntegerToolParameter", "name": "max_iter_brent", "argument": "-m", "type": "integer", "label": "Maximum number of iterations within BRENT algorithm", "help": "", "refresh_on_change": false, "min": 1, "max": 1000, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "max_iter_bw", "argument": "-w", "type": "integer", "label": "Maximum number of iterations within Baum-Welch algorithm", "help": "", "refresh_on_change": false, "min": 0, "max": 500, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "g1kmin", "argument": "-g1kmin", "type": "float", "label": "Minimum shape k of 'non-enriched' gamma distribution", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "g1kmax", "argument": "-g1kmax", "type": "float", "label": "Maximum shape k of 'non-enriched' gamma distribution", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "g2kmin", "argument": "-g2kmin", "type": "float", "label": "Minimum shape k of 'enriched' gamma distribution", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "g2kmax", "argument": "-g2kmax", "type": "float", "label": "Maximum shape k of 'enriched' gamma distribution", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "fk", "argument": "-fk", "type": "boolean", "label": "Do not constrain 'non-enriched' shape parameter k", "help": "When incorporating input signal, do not constrain 'non-enriched' shape parameter k LE 'enriched' gamma parameter k", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-fk", "falsevalue": ""}, {"model_class": "FloatToolParameter", "name": "mkn", "argument": "-mkn", "type": "float", "label": "Max. k/N ratio (read start sites/N) used to learn truncation probabilities for 'non-crosslink' and 'crosslink' emission probabilities", "help": "NOTE: high ratios might originate from mapping artifacts that can disturb parameter learning", "refresh_on_change": false, "min": 0.5, "max": 1.5, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "mtp", "argument": "-mtp", "type": "float", "label": "Min. transition probability from state '2' to '3'", "help": "Helpful for poor data, where no clear distinction between 'enriched' and 'non-enriched' is possible", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.0001", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "mk", "argument": "-mk", "type": "float", "label": "Minimum KDE value used for fitting left-truncated gamma distributions", "help": "Default: corresponding to singleton read start.", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "pa", "argument": "-pa", "type": "integer", "label": "Length threshold for internal poly-X stretches to get excluded", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "ea1", "argument": "-ea1", "type": "boolean", "label": "Exclude intervals containing poly-A stretches from learning", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-ea1", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "ea2", "argument": "-ea2", "type": "boolean", "label": "Exclude intervals containing poly-A stretches from analysis", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-ea2", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "et1", "argument": "-et1", "type": "boolean", "label": "Exclude intervals containing poly-U stretches from learning", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-et1", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "et2", "argument": "-et2", "type": "boolean", "label": "Exclude intervals containing poly-U stretches from analysis", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "-et2", "falsevalue": ""}, {"model_class": "FloatToolParameter", "name": "mrtf", "argument": "-mrtf", "type": "float", "label": "Fit gamma shape k only for positions with min. covariate value", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "mtc", "argument": "-mtc", "type": "integer", "label": "Maximum number of truncations at one position used for learning", "help": "NOTE: for sites with counts above threshold the whole covered regions will be ignored for learning!", "refresh_on_change": false, "min": 50, "max": 500, "optional": false, "hidden": false, "is_dynamic": false, "value": "250", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "pet", "argument": "-pet", "type": "integer", "label": "Prior enrichment threshold", "help": "A KDE threshold corresponding to -pet read start counts at one position will be used for initial classification of 'non-enriched' and 'enriched' site", "refresh_on_change": false, "min": 2, "max": 50, "optional": false, "hidden": false, "is_dynamic": false, "value": "7", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "advanced_params_selector", "argument": null, "type": "select", "label": "Additional advanced parameters", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "ap_not_specify", "options": [["Do not specify", "ap_not_specify", true], ["Manually specify", "ap_specify", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "output_options", "type": "section", "title": "Additional output options", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "crosslink_bed_stats", "argument": null, "type": "boolean", "label": "Output learned parameter statistics file?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}]}], "outputs": [{"model_class": "ToolOutput", "name": "crosslink_bed_outfile", "format": "bed", "label": "${tool.name} on ${on_string} crosslink sites (bed)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "crosslink_sites.bed", "edam_format": "format_3003", "edam_data": "data_3002", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "binding_region_bed_outfile", "format": "bed", "label": "${tool.name} on ${on_string} binding regions (bed)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "binding_regions.bed", "edam_format": "format_3003", "edam_data": "data_3002", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "crosslink_bed_stats", "format": "txt", "label": "${tool.name} on ${on_string} learned parameter statistcs (txt)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "crosslink_sites.bed.stats", "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}], "panel_section_id": "peak_calling", "panel_section_name": "Peak Calling", "form_style": "regular"}