{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/umi_tools_count/umi_tools_count/0.5.3.0", "name": "UMI-tools count", "version": "0.5.3.0", "description": "Count UMIs from BAM files", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "umi_tools_count", "owner": "iuc", "changeset_revision": "8db56d2f8b72", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "input_bam", "argument": null, "type": "data", "label": "Sorted BAM file", "help": "Please use the samtools sort tool to ensure a correct BAM input", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam"], "edam": {"edam_formats": ["format_2572"], "edam_data": ["data_0863"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "BooleanToolParameter", "name": "bam_paired", "argument": null, "type": "boolean", "label": "Bam is paired-end", "help": "both read pairs will be output. This will also force the use of the template length to determine  reads with the same mapping coordinates.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--paired", "falsevalue": ""}, {"model_class": "Conditional", "name": "barcodes", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "read_id", "inputs": [{"model_class": "TextToolParameter", "name": "delimiter", "argument": null, "type": "text", "label": "Delimiter between read id and the UMI", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "_", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "tag", "inputs": [{"model_class": "TextToolParameter", "name": "umi_tag", "argument": null, "type": "text", "label": "Tag which contains the UMI", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "cell_tag", "argument": null, "type": "text", "label": "Tag which contains the cell barcode", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "umis", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "extract_umi_method", "argument": null, "type": "select", "label": "Umi Extract Method", "help": "How are the barcodes encoded in the read?", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "read_id", "options": [["Barcodes are contained at the end of the read seperated by a delimiter", "read_id", true], ["Barcodes are contained in tags", "tag", false], ["Barcodes were extracted using umis", "umis", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "SelectToolParameter", "name": "grouping_method", "argument": null, "type": "select", "label": "Method to identify group of reads", "help": "UMIs with the same (or similar) codes can be grouped together. The simplest methods 'unique' and 'percentile' group identical  UMIs, however 'cluster', 'adjacency', and 'directional' can group similar umis with edit distances less than some threshold. Unique: Reads group share the exact same UMI. Percentile: Reads group share the same UMI, and UMIs with  counts < 1% of the median counts for UMIs at the same position are ignored. Cluster: Identify clusters of connected UMIs (based on hamming distance threshold). Adjacency: Same as cluster, but considers only directly ajacent  UMIs in the cluster. Directional: Identify cluster of connected UMIs based on hamming distance and umi.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "directional", "options": [["Unique", "unique", false], ["Percentile", "percentile", false], ["Cluster", "cluster", false], ["Adjacency", "adjacency", false], ["Directional", "directional", true]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "hamming_distance", "argument": null, "type": "integer", "label": "Edit distance threshold", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "wide_format_cell_counts", "argument": null, "type": "boolean", "label": "Output a mtrix of genes and cells, instead of a flat file", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--wide-format-cell-counts", "falsevalue": ""}, {"model_class": "Section", "name": "advanced", "type": "section", "title": "Extra parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "mapping_quality", "argument": null, "type": "integer", "label": "Minimum mapping quality", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "gene_tag", "argument": null, "type": "text", "label": "Deduplicate per gene.", "help": "The gene information is encoded in the bam read tag.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "skip_tags_regex", "argument": null, "type": "text", "label": "Skip any reads where the gene matches this tag", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "per_contig", "argument": null, "type": "boolean", "label": "Deduplicate per contig (field 3 in BAM; RNAME)", "help": "All reads with the same contig will be considered to have the same alignment position. This is useful if you have aligned to a reference transcriptome with one transcript per gene.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--per-contig", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "per_cell", "argument": null, "type": "boolean", "label": "Group reads only if they have the same cell barcode.", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--per-cell", "falsevalue": ""}, {"model_class": "IntegerToolParameter", "name": "random_seed", "argument": null, "type": "integer", "label": "Random Seed", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}]}], "outputs": [{"model_class": "ToolOutput", "name": "out_counts", "format": "tsv", "label": "", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}, {"model_class": "ToolOutput", "name": "out_log", "format": "txt", "label": "", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": null, "visible": false, "assign_primary_output": false, "directory": null, "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "primary_DATASET_ID_(?P<designation>[^_]+)_(?P<visible>[^_]+)_(?P<ext>[^_]+)(_(?P<dbkey>[^_]+))?", "sort_by": "filename"}]}], "panel_section_id": "fasta_fastq", "panel_section_name": "FASTA/FASTQ", "form_style": "regular"}