{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/macs2/macs2_callpeak/2.1.1.20160309.5", "name": "MACS2 callpeak", "version": "2.1.1.20160309.5", "description": "Call peaks from alignment results", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "macs2", "owner": "iuc", "changeset_revision": "495a4173006f", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "Conditional", "name": "treatment", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "No", "inputs": [{"model_class": "DataToolParameter", "name": "input_treatment_file", "argument": "-t", "type": "data", "label": "ChIP-Seq Treatment File", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam", "sam", "bed"], "edam": {"edam_formats": ["format_2572", "format_2573", "format_3003"], "edam_data": ["data_0863", "data_0863", "data_3002"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "Yes", "inputs": [{"model_class": "DataToolParameter", "name": "input_treatment_file", "argument": "-t", "type": "data", "label": "ChIP-Seq Treatment File", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam", "sam", "bed"], "edam": {"edam_formats": ["format_2572", "format_2573", "format_3003"], "edam_data": ["data_0863", "data_0863", "data_3002"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "t_multi_select", "argument": null, "type": "select", "label": "Are you pooling Treatment Files?", "help": "For more information, see Help section below", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "No", "options": [["No", "No", true], ["Yes", "Yes", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "control", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "Yes", "inputs": [{"model_class": "Conditional", "name": "c_multiple", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "No", "inputs": [{"model_class": "DataToolParameter", "name": "input_control_file", "argument": "-c", "type": "data", "label": "ChIP-Seq Control File", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam", "sam", "bed"], "edam": {"edam_formats": ["format_2572", "format_2573", "format_3003"], "edam_data": ["data_0863", "data_0863", "data_3002"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "Yes", "inputs": [{"model_class": "DataToolParameter", "name": "input_control_file", "argument": "-c", "type": "data", "label": "ChIP-Seq Control File", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bam", "sam", "bed"], "edam": {"edam_formats": ["format_2572", "format_2573", "format_3003"], "edam_data": ["data_0863", "data_0863", "data_3002"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "c_multi_select", "argument": null, "type": "select", "label": "Are you pooling Control Files?", "help": "For more information, see Help section below", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "No", "options": [["No", "No", true], ["Yes", "Yes", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "ConditionalWhen", "value": "No", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "c_select", "argument": null, "type": "select", "label": "Do you have a Control File?", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "No", "options": [["Yes", "Yes", false], ["No", "No", true]], "display": null, "multiple": false, "textable": false}}, {"model_class": "SelectToolParameter", "name": "format", "argument": "--format", "type": "select", "label": "Format of Input Files", "help": "For Paired-end BAM (BAMPE) the 'Build model step' will be ignored and the real fragments will be used for each template defined by leftmost and rightmost mapping positions. Default: Single-end BAM", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "BAM", "options": [["Single-end BAM", "BAM", true], ["Paired-end BAM", "BAMPE", false], ["Single-end BED", "BED", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "Conditional", "name": "effective_genome_size_options", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "2700000000", "inputs": []}, {"model_class": "ConditionalWhen", "value": "1870000000", "inputs": []}, {"model_class": "ConditionalWhen", "value": "120000000", "inputs": []}, {"model_class": "ConditionalWhen", "value": "90000000", "inputs": []}, {"model_class": "ConditionalWhen", "value": "user_defined", "inputs": [{"model_class": "IntegerToolParameter", "name": "gsize", "argument": null, "type": "integer", "label": "Effective genome size", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "effective_genome_size_options_selector", "argument": null, "type": "select", "label": "Effective genome size", "help": "The effective genome size is the portion of the genome that is mappable. Large fractions of the genome are stretches of Ns that should be discarded.                 Also, if repetitive regions were not included in the mapping of reads, the effective genome size needs to be adjusted accordingly. Sizes are from the MACS2 website (--gsize)", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "2700000000", "options": [["H. sapiens (2.7e9)", "2700000000", false], ["M. musculus (1.87e9)", "1870000000", false], ["D. melanogaster (1.2e8)", "120000000", false], ["C. elegans (9e7)", "90000000", false], ["User defined", "user_defined", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "nomodel_type", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "create_model", "inputs": [{"model_class": "IntegerToolParameter", "name": "mfold_lower", "argument": null, "type": "integer", "label": "Set lower mfold bound", "help": "Select the lower region within MFOLD range of high confidence enrichment ratio against background to build model. Fold-enrichment in regions must be higher than lower limit (--mfold). Default: 5", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "mfold_upper", "argument": null, "type": "integer", "label": "Set upper mfold bound", "help": "Select the upper region within MFOLD range of high confidence enrichment ratio against background to build model. Fold-enrichment in regions must be lower than the upper limit (--mfold). Default: 50", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "50", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "band_width", "argument": "--bw", "type": "integer", "label": "Band width for picking regions to compute fragment size", "help": " You can set this parameter as the medium fragment size expected from sonication or size selection. Default: 300", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "300", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "nomodel", "inputs": [{"model_class": "IntegerToolParameter", "name": "extsize", "argument": "--extsize", "type": "integer", "label": "Set extension size", "help": "The arbitrary extension size in bp. When nomodel is true, MACS will use this value as fragment size to extend each read towards 3-prime; end, then pile them up. It is exactly twice the number of obsolete SHIFTSIZE. In previous language, each read is moved 5-prime-to-3-prime direction to middle of fragment by 0.5 d, then extended to both direction with 0.5 d. This is equivalent to say each read is extended towards 5-prime-to-3-prime into a d size fragment. --extsize (this option) and --shift (the option below) can be combined when necessary. See --shift option below. Default: 200.", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "200", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "shift", "argument": "--shift", "type": "integer", "label": "Set shift size", "help": "(NOT the legacy --shiftsize option!) The arbitrary shift in bp. Use discretion while setting it other than default value. When NOMODEL is set, MACS will use this value to move cutting ends (5-prime) towards 5-prime-to-3-prime  direction then apply EXTSIZE to extend them to fragments. When this value is negative, ends will be moved toward 3-prime-to-5-prime  direction. Recommended to keep it as default 0 for ChIP-Seq datasets, or -1 * 0.5 of --extsize (option above) together with --extsize option for detecting enriched cutting loci such as certain DNAseI-Seq datasets. Note, you can't set values other than 0 if format is paired-end data (BAMPE). Default: 0", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "nomodel_type_selector", "argument": null, "type": "select", "label": "Build Model", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "create_model", "options": [["Do not build the shifting model (--nomodel)", "nomodel", false], ["Build the shifting model", "create_model", true]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "cutoff_options", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "pvalue", "inputs": [{"model_class": "FloatToolParameter", "name": "pvalue", "argument": "--pvalue", "type": "float", "label": "p-value cutoff for peak detection", "help": "Default: not set", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "qvalue", "inputs": [{"model_class": "FloatToolParameter", "name": "qvalue", "argument": "--qvalue", "type": "float", "label": "Minimum FDR (q-value) cutoff for peak detection", "help": "The q-value (minimum FDR) cutoff to call significant regions. Default is 0.05. For broad marks, you can try 0.05 as cutoff. Q-values are calculated from p-values using Benjamini-Hochberg procedure", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.05", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "cutoff_options_selector", "argument": null, "type": "select", "label": "Peak detection based on", "help": "default uses q-value", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "qvalue", "options": [["q-value", "qvalue", true], ["p-value", "pvalue", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "SelectToolParameter", "name": "outputs", "argument": null, "type": "select", "label": "Additional Outputs", "help": "PDF is only created when the model is built", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "options": [["Peaks as tabular file (compatible wih MultiQC)", "peaks_tabular", false], ["Peak summits", "summits", false], ["Scores in bedGraph files (--bdg)", "bdg", false], ["Summary page (html)", "html", false], ["Plot in PDF (only available if a model is created and if BAMPE is not used)", "pdf", false]], "display": "checkboxes", "multiple": true, "textable": false}, {"model_class": "Section", "name": "advanced_options", "type": "section", "title": "Advanced Options", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "to_large", "argument": "--to-large", "type": "boolean", "label": "When set, scale the small sample up to the bigger sample", "help": "By default, the bigger dataset will be scaled down towards the smaller dataset, which will lead to smaller p/qvalues and more specific results. Keep in mind that scaling down will bring down background noise more. Default: No", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--to-large", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "nolambda", "argument": "--nolambda", "type": "boolean", "label": "Use fixed background lambda as local lambda for every peak region", "help": "up to 9X more time consuming. Default: No", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--nolambda", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "spmr", "argument": "--SPMR", "type": "boolean", "label": "Save signal per million reads for fragment pileup profiles", "help": "Requires 'Scores in bedGraph files (--bdg)' output to be selected. Default: No", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--SPMR", "falsevalue": ""}, {"model_class": "FloatToolParameter", "name": "ratio", "argument": "--ratio", "type": "float", "label": "When set, use a custom scaling ratio of ChIP/control (e.g. calculated using NCIS) for linear scaling", "help": "Default: ignore", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "slocal", "argument": null, "type": "integer", "label": "The small nearby region in basepairs to calculate dynamic lambda", "help": "This is used to capture the bias near the peak summit region. Invalid if there is no control data. If you set this to 0, MACS will skip slocal lambda calculation. *Note* that MACS will always perform a d-size local lambda calculation. The final local bias should be the maximum of the lambda value from d, slocal, and llocal size windows. (--slocal). Default: 1000", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "llocal", "argument": "--llocal", "type": "integer", "label": "The large nearby region in basepairs to calculate dynamic lambda", "help": "This is used to capture the surround bias. If you set this to 0, MACS will skip llocal lambda calculation. *Note* that MACS will always perform a d-size local lambda calculation. The final local bias should be the maximum of the lambda value from d, slocal, and llocal size windows. Default: 10000", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "Conditional", "name": "broad_options", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "broad", "inputs": [{"model_class": "FloatToolParameter", "name": "broad_cutoff", "argument": null, "type": "float", "label": "Cutoff for broad region", "help": "value is either p-value or q-value as specified above (--broad-cutoff)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.1", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "nobroad", "inputs": [{"model_class": "BooleanToolParameter", "name": "call_summits", "argument": "--call-summits", "type": "boolean", "label": "Use a more sophisticated signal processing approach to find subpeak summits in each enriched peak region", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--call-summits", "falsevalue": ""}]}], "test_param": {"model_class": "SelectToolParameter", "name": "broad_options_selector", "argument": "--broad", "type": "select", "label": "Composite broad regions", "help": "by putting nearby highly enriched regions into a broad region with loose cutoff", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "nobroad", "options": [["No broad regions", "nobroad", true], ["broad regions", "broad", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "keep_dup_options", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "user", "inputs": [{"model_class": "IntegerToolParameter", "name": "user_keepdup", "argument": null, "type": "integer", "label": "Keep at most this number of tags at the exact same location", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "1", "inputs": []}, {"model_class": "ConditionalWhen", "value": "all", "inputs": []}, {"model_class": "ConditionalWhen", "value": "auto", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "keep_dup_options_selector", "argument": null, "type": "select", "label": "How many duplicate tags at the exact same location are allowed?", "help": "The default 'auto' option calculates the maximum tags at the exact same location based on binomial distribution using 1e-5 as pvalue cutoff. The 'all' option keeps every tags. If an integer is given, at most this number of tags will be kept at the same location. The default is to keep one tag at the same location. (--keep-dup 1)", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "options": [["1", "1", true], ["all", "all", false], ["auto", "auto", false], ["user defined", "user", false]], "display": null, "multiple": false, "textable": false}}]}], "outputs": [{"model_class": "ToolOutput", "name": "output_tabular", "format": "tabular", "label": "${tool.name} on ${on_string} (Peaks in tabular format)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_broadpeaks", "format": "bed", "label": "${tool.name} on ${on_string} (broad Peaks)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_peaks.broadPeak", "edam_format": "format_3003", "edam_data": "data_3002", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_gappedpeaks", "format": "bed", "label": "${tool.name} on ${on_string} (gapped Peaks)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_peaks.gappedPeak", "edam_format": "format_3003", "edam_data": "data_3002", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_narrowpeaks", "format": "bed", "label": "${tool.name} on ${on_string} (narrow Peaks)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_peaks.narrowPeak", "edam_format": "format_3003", "edam_data": "data_3002", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_summits", "format": "bed", "label": "${tool.name} on ${on_string} (summits in BED)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_summits.bed", "edam_format": "format_3003", "edam_data": "data_3002", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_plot", "format": "pdf", "label": "${tool.name} on ${on_string} (plot)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_model.pdf", "edam_format": "format_3508", "edam_data": "data_2968", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_treat_pileup", "format": "bedgraph", "label": "${tool.name} on ${on_string} (Bedgraph Treatment)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_treat_pileup.bdg", "edam_format": "format_3583", "edam_data": "data_3002", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_control_lambda", "format": "bedgraph", "label": "${tool.name} on ${on_string} (Bedgraph Control)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "*_control_lambda.bdg", "edam_format": "format_3583", "edam_data": "data_3002", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_extra_files", "format": "html", "label": "${tool.name} on ${on_string} (html report)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "treatment|input_treatment_file", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2331", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "peak_calling", "panel_section_name": "Peak Calling", "form_style": "regular"}