{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/snapatac2_peaks_and_motif/snapatac2_peaks_and_motif/2.6.4+galaxy1", "name": "SnapATAC2 peaks and motif", "version": "2.6.4+galaxy1", "description": "analysis", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "snapatac2_peaks_and_motif", "owner": "iuc", "changeset_revision": "88192fe25375", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "Conditional", "name": "method", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "tl.macs3", "inputs": [{"model_class": "DataToolParameter", "name": "adata", "argument": null, "type": "data", "label": "Annotated data matrix", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5ad"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "groupby", "argument": "groupby", "type": "text", "label": "Group cells before peak calling based on key in `.obs`", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "qvalue", "argument": "qvalue", "type": "float", "label": "qvalue cutoff used in MACS3", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.05", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "replicate", "argument": "replicate", "type": "text", "label": "Replicate information based on key in `.obs`", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "replicate_qvalue", "argument": "replicate_qvalue", "type": "float", "label": "qvalue cutoff used in MACS3 for calling peaks in replicates", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "max_frag_size", "argument": "max_frag_size", "type": "integer", "label": "Maximum fragment size", "help": "This is used to remove fragments that are not from nucleosome-free regions.", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "nolambda", "argument": "nolambda", "type": "boolean", "label": "If True, macs3 will use the background lambda as local lambda", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "True", "falsevalue": "False"}, {"model_class": "IntegerToolParameter", "name": "shift", "argument": "shift", "type": "integer", "label": "The shift size in MACS", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "-100", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "extsize", "argument": "extsize", "type": "integer", "label": "The extension size in MACS", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "200", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "min_len", "argument": "min_len", "type": "integer", "label": "The minimum length of a called peak", "help": "If not set, it is set to the extension size.", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "blacklist", "argument": "blacklist", "type": "data", "label": "Blacklist file in BED format", "help": "If provided, regions in the blacklist will be removed.", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["bed"], "edam": {"edam_formats": ["format_3003"], "edam_data": ["data_3002"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "key_added", "argument": "key_added", "type": "text", "label": "`.uns` key under which to add peak information", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "macs3", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "tl.merge_peaks", "inputs": [{"model_class": "DataToolParameter", "name": "adata", "argument": null, "type": "data", "label": "Annotated data matrix", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5ad"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "macs_key", "argument": null, "type": "text", "label": "`.uns` key under which peak information was added while peak calling", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "macs3", "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "chrom_sizes", "argument": "chrom_sizes", "type": "data", "label": "Chromosome sizes", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "IntegerToolParameter", "name": "half_width", "argument": "half_width", "type": "integer", "label": "Half width of the merged peaks", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "250", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "pp.make_peak_matrix", "inputs": [{"model_class": "DataToolParameter", "name": "adata", "argument": null, "type": "data", "label": "Annotated data matrix", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5ad"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "use_rep", "argument": "use_rep", "type": "text", "label": "Used to read peak information from .uns[use_rep]", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "merged_peaks", "argument": "merged_peaks", "type": "data", "label": "Merged peaks file", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "IntegerToolParameter", "name": "chunk_size", "argument": "chunk_size", "type": "integer", "label": "chunk size", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "500", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "use_x", "argument": "use_x", "type": "boolean", "label": "If True, use the matrix stored in .X as raw counts", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "True", "falsevalue": "False"}, {"model_class": "IntegerToolParameter", "name": "min_frag_size", "argument": "min_frag_size", "type": "integer", "label": "Minimum fragment size to include", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "max_frag_size", "argument": "max_frag_size", "type": "integer", "label": "Maximum fragment size to include", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "counting_strategy", "argument": "counting_strategy", "type": "select", "label": "The strategy to compute feature counts", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "insertion", "options": [["\"fragment\": based on the number of fragments that overlap with a region of interest", "fragment", false], ["\"insertion\": based on the number of insertions that overlap with a region of interest", "insertion", true], ["\"paired-insertion\": similar to \"insertion\", but it only counts the insertions once if the pair of insertions of a fragment are both within the same region of interest", "paired-insertion", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "tl.marker_regions", "inputs": [{"model_class": "DataToolParameter", "name": "adata", "argument": null, "type": "data", "label": "Annotated data matrix", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5ad"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "groupby", "argument": "groupby", "type": "text", "label": "The key of the observation grouping to consider", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "pvalue", "argument": "pvalue", "type": "float", "label": "P-value threshold", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.01", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "width", "argument": "width", "type": "integer", "label": "Width of the plot", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "600", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "height", "argument": "height", "type": "integer", "label": "Height of the plot", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "400", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "out_file", "argument": null, "type": "select", "label": "Type of output plot", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "png", "options": [["PNG", "png", true], ["SVG", "svg", false], ["PDF", "pdf", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "tl.diff_test", "inputs": [{"model_class": "DataToolParameter", "name": "adata", "argument": null, "type": "data", "label": "Annotated data matrix", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5ad"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "merged_peaks", "argument": "merged_peaks", "type": "data", "label": "Merged peaks file", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "group_key", "argument": null, "type": "text", "label": "key in `.obs` to select cell groups", "help": "for eg. cell_type", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "cell_type", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "compare", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "single_group", "inputs": [{"model_class": "TextToolParameter", "name": "group1_value", "argument": null, "type": "text", "label": "name of the group 1 stored in .obs", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "Naive B", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "group2_value", "argument": null, "type": "text", "label": "name of the group 2 stored in .obs", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "Memory B", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "background_group", "inputs": [{"model_class": "TextToolParameter", "name": "group1_value", "argument": null, "type": "text", "label": "name of the group 1 stored in .obs", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "Naive B", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "number_of_cells", "argument": null, "type": "integer", "label": "Number of cells to subsample from ther other groups", "help": "", "refresh_on_change": false, "min": 1, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "30", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "with", "argument": null, "type": "select", "label": "Test for differential accessibility in a group of cells compared to", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "single_group", "options": [["Another group of cells", "single_group", false], ["Background cell group built from random selection of cells from all other the groups", "background_group", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "SelectToolParameter", "name": "direction", "argument": "direction", "type": "select", "label": "\u201cpositive\u201d: return features that are enriched in group 1. \u201cnegative\u201d: return features that are enriched in group 2", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "both", "options": [["\u201cpositive\u201d: return features that are enriched in group 1", "positive", false], [" \u201cnegative\u201d: return features that are enriched in group 2", "negative", false], ["\u201cboth\u201d: return features that are enriched in group 1 or group 2", "both", true]], "display": null, "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "min_log_fc", "argument": "min_log_fc", "type": "float", "label": "Limit testing to features which show, on average, at least this difference (log2-scale) between the two groups of cells", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.25", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "min_pct", "argument": "min_pct", "type": "float", "label": "Only test features that are detected in a minimum fraction of min_pct cells in either of the two population", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.05", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "width", "argument": "width", "type": "integer", "label": "Width of the plot", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "600", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "height", "argument": "height", "type": "integer", "label": "Height of the plot", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "400", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "out_file", "argument": null, "type": "select", "label": "Type of output plot", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "png", "options": [["PNG", "png", true], ["SVG", "svg", false], ["PDF", "pdf", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "cutoff_p_adj", "argument": null, "type": "float", "label": "Adjusted p-value cutoff for plotting", "help": "This cutoff is applied for plotting only", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.01", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "cutoff_l2fc", "argument": null, "type": "float", "label": "Log2 fold change cutoff for plotting", "help": "This cutoff is applied for plotting only", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "method", "argument": null, "type": "select", "label": "Tool", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "tl.macs3", "options": [["Call peaks using MACS3, using 'tl.macs3'", "tl.macs3", false], ["Merge peaks from different groups, using 'tl.merge_peaks'", "tl.merge_peaks", false], ["Generate cell by peak count matrix, using 'pp.make_peak_matrix'", "pp.make_peak_matrix", false], ["A quick-and-dirty way to get marker regions, using 'tl.marker_regions'", "tl.marker_regions", false], ["Identify differentially accessible regions,using 'tl.diff_test'", "tl.diff_test", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "advanced_common", "type": "section", "title": "Advanced Options", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "show_log", "argument": null, "type": "boolean", "label": "Output Log?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}]}], "outputs": [{"model_class": "ToolOutput", "name": "anndata_out", "format": "h5ad", "label": "${tool.name} (${method.method}) on ${on_string}: Annotated data matrix", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "anndata.h5ad", "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "hidden_output", "format": "txt", "label": "Log file", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "merged_peaks", "format": "tabular", "label": "${tool.name} (${method.method}) on ${on_string}: Merged peaks", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "merged_peaks.tabular", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "out_png", "format": "png", "label": "PNG plot from ${tool.name} (${method.method}) on ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "plot.png", "edam_format": "format_3603", "edam_data": "data_2968", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "out_pdf", "format": "pdf", "label": "PDF plot from ${tool.name} (${method.method}) on ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "plot.pdf", "edam_format": "format_3508", "edam_data": "data_2968", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "out_svg", "format": "svg", "label": "SVG plot from ${tool.name} (${method.method}) on ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "plot.svg", "edam_format": "format_2332", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "diff_peaks", "format": "tabular", "label": "${tool.name} on ${on_string}: Differential peaks", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "diff_peaks.tabular", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "single-cell", "panel_section_name": "Single-cell", "form_style": "regular"}