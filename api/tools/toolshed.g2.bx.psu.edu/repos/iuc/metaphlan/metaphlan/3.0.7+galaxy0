{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/metaphlan/metaphlan/3.0.7+galaxy0", "name": "MetaPhlAn", "version": "3.0.7+galaxy0", "description": "to profile the composition of microbial communities", "labels": [], "edam_operations": ["operation_2478", "operation_0324"], "edam_topics": ["topic_3174", "topic_0194"], "hidden": "", "is_workflow_compatible": true, "xrefs": [{"value": "metaphlan", "reftype": "bio.tools"}], "tool_shed_repository": {"name": "metaphlan", "owner": "iuc", "changeset_revision": "f5df500fcc3c", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "Section", "name": "inputs", "type": "section", "title": "Inputs", "help": null, "expanded": true, "inputs": [{"model_class": "Conditional", "name": "in", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "raw", "inputs": [{"model_class": "Conditional", "name": "raw_in", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "single", "inputs": [{"model_class": "DataToolParameter", "name": "in", "argument": null, "type": "data", "label": "Single-end Fasta/FastQ file with metagenomic reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastq", "fastq.gz", "fastq.bz2", "fasta", "fasta.gz", "fasta.bz2"], "edam": {"edam_formats": ["format_1930", "format_1930", "format_1930", "format_1929", "format_1929", null], "edam_data": ["data_2044", "data_2044", "data_2044", "data_2044", "data_2044", null]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "multiple", "inputs": [{"model_class": "DataToolParameter", "name": "in", "argument": null, "type": "data", "label": "Single-end Fasta/FastQ files with metagenomic reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastq", "fastq.gz", "fastq.bz2", "fasta", "fasta.gz", "fasta.bz2"], "edam": {"edam_formats": ["format_1930", "format_1930", "format_1930", "format_1929", "format_1929", null], "edam_data": ["data_2044", "data_2044", "data_2044", "data_2044", "data_2044", null]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "paired", "inputs": [{"model_class": "DataToolParameter", "name": "in_f", "argument": null, "type": "data", "label": "Forward paired-end Fasta/FastQ file with metagenomic reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastq", "fastq.gz", "fastq.bz2", "fasta", "fasta.gz", "fasta.bz2"], "edam": {"edam_formats": ["format_1930", "format_1930", "format_1930", "format_1929", "format_1929", null], "edam_data": ["data_2044", "data_2044", "data_2044", "data_2044", "data_2044", null]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "in_r", "argument": null, "type": "data", "label": "Reverse paired-end Fasta/FastQ file with metagenomic reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fastq", "fastq.gz", "fastq.bz2", "fasta", "fasta.gz", "fasta.bz2"], "edam": {"edam_formats": ["format_1930", "format_1930", "format_1930", "format_1929", "format_1929", null], "edam_data": ["data_2044", "data_2044", "data_2044", "data_2044", "data_2044", null]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "selector", "argument": null, "type": "select", "label": "Fasta/FastQ file(s) with metagenomic reads", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "single", "options": [["One single-end file", "single", true], ["Multiple single-end files", "multiple", false], ["Paired-end files", "paired", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "IntegerToolParameter", "name": "read_min_len", "argument": "--read_min_len", "type": "integer", "label": "Minimum length of the reads to be considered when parsing the input file", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "70", "area": false, "datalist": []}, {"model_class": "Section", "name": "mapping", "type": "section", "title": "Mapping", "help": null, "expanded": true, "inputs": [{"model_class": "SelectToolParameter", "name": "bt2_ps", "argument": "--bt2_ps", "type": "select", "label": "Presets options for BowTie2", "help": "Applied only with FASTA files", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "very-sensitive", "options": [["Sensitive", "sensitive", false], ["Very sensitive", "very-sensitive", true], ["Sensitive local", "sensite-local", false], ["Very sensitive local", "very-sensite-local", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "min_mapq_val", "argument": "--min_mapq_val", "type": "integer", "label": "Minimum mapping quality value (MAPQ)", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}]}]}, {"model_class": "ConditionalWhen", "value": "sam", "inputs": [{"model_class": "DataToolParameter", "name": "in", "argument": null, "type": "data", "label": "Externally BowTie2-mapped SAM file", "help": "BowTie2 needs to be used first to map metagenom reads", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["sam"], "edam": {"edam_formats": ["format_2573"], "edam_data": ["data_0863"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "bowtie2out", "inputs": [{"model_class": "DataToolParameter", "name": "in", "argument": null, "type": "data", "label": "Intermediary mapping file of the metagenome generated by a previous MetaPhlAn run", "help": "File needs to be generated with MetaPhlAn versions >3.0", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "selector", "argument": null, "type": "select", "label": "Input(s)", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "raw", "options": [["Fasta/FastQ file(s) with metagenomic reads", "raw", true], ["Externally BowTie2-mapped SAM file", "sam", false], ["Intermediary mapping file of the metagenome generated by a previous MetaPhlAn run", "bowtie2out", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "db", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "cached", "inputs": [{"model_class": "SelectToolParameter", "name": "cached_db", "argument": null, "type": "select", "label": "Cached database with clade-specific marker genes", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": true, "value": "mpa_v30_CHOCOPhlAn_201901-16052021", "options": [["MetaPhlAn clade-specific marker genes (mpa_v30_CHOCOPhlAn_201901)", "mpa_v30_CHOCOPhlAn_201901-16052021", false], ["MetaPhlAn clade-specific marker genes (mpa_vJan21_CHOCOPhlAnSGB_202103)", "mpa_vJan21_SGBCHOCOPhlAn_202103-04042023", false], ["MetaPhlAn clade-specific marker genes (mpa_vOct22_CHOCOPhlAnSGB_202212)", "mpa_vOct22_SGBCHOCOPhlAn_202212-03042023", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "history", "inputs": [{"model_class": "DataToolParameter", "name": "bowtie2db", "argument": "--bowtie2db", "type": "data", "label": "Database with clade-specific marker genes from history", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["fasta"], "edam": {"edam_formats": ["format_1929"], "edam_data": ["data_2044"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "DataToolParameter", "name": "mpa_pkl", "argument": "--mpa_pkl", "type": "data", "label": "Metadata associate to the database with clade-specific marker genes from history", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["json"], "edam": {"edam_formats": ["format_3464"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "db_selector", "argument": null, "type": "select", "label": "Database with clade-specific marker genes", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "cached", "options": [["Locally cached", "cached", true], ["From history", "history", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "Section", "name": "analysis", "type": "section", "title": "Analysis", "help": null, "expanded": true, "inputs": [{"model_class": "Conditional", "name": "analysis_type", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "rel_ab", "inputs": [{"model_class": "SelectToolParameter", "name": "tax_lev", "argument": "--tax_lev", "type": "select", "label": "Taxonomic level for the relative abundance output", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "a", "options": [["All taxonomic levels", "a", true], ["Kingdoms only", "k", false], ["Phyla only", "p", false], ["Classes only", "c", false], ["Orders only", "o", false], ["Families only", "f", false], ["Genera only", "g", false], ["Species only", "s", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "rel_ab_w_read_stats", "inputs": [{"model_class": "SelectToolParameter", "name": "tax_lev", "argument": "--tax_lev", "type": "select", "label": "Taxonomic level for the relative abundance output", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "a", "options": [["All taxonomic levels", "a", true], ["Kingdoms only", "k", false], ["Phyla only", "p", false], ["Classes only", "c", false], ["Orders only", "o", false], ["Families only", "f", false], ["Genera only", "g", false], ["Species only", "s", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "reads_map", "inputs": []}, {"model_class": "ConditionalWhen", "value": "clade_profiles", "inputs": []}, {"model_class": "ConditionalWhen", "value": "clade_specific_strain_tracker", "inputs": [{"model_class": "TextToolParameter", "name": "clade", "argument": "--clade", "type": "text", "label": "Clade for which to extract list of markers present", "help": "Markers are also extracted for subclades", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "min_ab", "argument": "--min_ab", "type": "float", "label": "The minimum percentage abundance for the clade", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "marker_ab_table", "inputs": [{"model_class": "IntegerToolParameter", "name": "nreads", "argument": "--nreads", "type": "integer", "label": "Total number of reads in the original metagenome", "help": "It is used for normalizing the length-normalized counts with the metagenome size as well. No normalization applied if the value is not specified", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "marker_counts", "inputs": []}, {"model_class": "ConditionalWhen", "value": "marker_pres_table", "inputs": [{"model_class": "IntegerToolParameter", "name": "pres_th", "argument": "--pres_th", "type": "integer", "label": "Threshold for calling a marker present", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "t", "argument": "-t", "type": "select", "label": "Type of analysis to perform", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "rel_ab", "options": [["rel_ab: Profiling a metagenomes in terms of relative abundances", "rel_ab", true], ["rel_ab_w_read_stats: Profiling a metagenomes in terms of relative abundances and estimate the number of reads comming from each clade", "rel_ab_w_read_stats", false], ["reads_map: Mapping from reads to clades (only reads hitting a marker)", "reads_map", false], ["clade_profiles: Normalized marker counts for clades with at least a non-null marker", "clade_profiles", false], ["clade_specific_strain_tracker: List of markers present for a specific clade and all its subclades", "clade_specific_strain_tracker", false], ["marker_ab_table: Normalized marker counts (only when > 0.0 and normalized by metagenome size if number of reads is specified)", "marker_ab_table", false], ["marker_counts: Non-normalized marker counts (use with extreme caution)", "marker_counts", false], ["marker_pres_table: List of markers present in the sample (threshold at 1.0 if not differently specified with --pres_th", "marker_pres_table", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "IntegerToolParameter", "name": "min_cu_len", "argument": "--min_cu_len", "type": "integer", "label": "Minimum total nucleotide length for the markers in a clade for estimating the abundance without considering sub-clade abundances", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2000", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "min_alignment_len", "argument": "--min_alignment_len", "type": "integer", "label": "Sam records for aligned reads with the longest subalignment length smaller than this threshold will be discarded.", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "organism_profiling", "argument": null, "type": "select", "label": "Organisms to profile", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "add_viruses", "options": [["Profile viral organisms (add_viruses)", "add_viruses", true], ["Ignore eukaryotic organisms (ignore_eukaryotes)", "ignore_eukaryotes", false], ["Ignore bacteria organisms (ignore_bacteria)", "ignore_bacteria", false], ["Ignore archea organisms (ignore_archaea)", "ignore_archaea", false]], "display": null, "multiple": true, "textable": false}, {"model_class": "SelectToolParameter", "name": "stat", "argument": "--stat", "type": "select", "label": "Statistical approach for converting marker abundances into clade abundances", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "tavg_g", "options": [["avg_g: Clade global (i.e. normalizing all markers together) average (avg_g)", "avg_g", false], ["avg_l: Average of length-normalized marker counts", "avg_l", false], ["tavg_g: Truncated clade global average at --stat_q quantile", "tavg_g", true], ["tavg_l: Truncated average of length-normalized marker counts (at --stat_q)", "tavg_l", false], ["wavg_g: Winsorized clade global average (at --stat_q)", "wavg_g", false], ["wavg_l: Winsorized average of length-normalized marker counts (at --stat_q)", "wavg_l", false], ["med: Median of length-normalized marker counts", "med", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "stat_q", "argument": "--stat_q", "type": "float", "label": "Quantile value for the robust average", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.2", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "perc_nonzero", "argument": "--perc_nonzero", "type": "float", "label": "Percentage of markers with a non zero relative abundance for misidentify a species", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.33", "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "ignore_markers", "argument": "--ignore_markers", "type": "data", "label": "File containing a list of markers to ignore", "help": "One marker per line", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["txt", "tabular"], "edam": {"edam_formats": ["format_2330", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "BooleanToolParameter", "name": "avoid_disqm", "argument": "--avoid_disqm", "type": "boolean", "label": "Deactivate the procedure of disambiguating the quasi-markers based on the marker abundance pattern found in the sample?", "help": "It is generally recommended to keep the disambiguation procedure in order to minimize false positives", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "--avoid_disqm", "falsevalue": ""}]}, {"model_class": "Section", "name": "out", "type": "section", "title": "Outputs", "help": null, "expanded": true, "inputs": [{"model_class": "TextToolParameter", "name": "sample_id_key", "argument": "--sample_id_key", "type": "text", "label": "Sample ID key for this analysis", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "SampleID", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "sample_id", "argument": "--sample_id", "type": "text", "label": "Sample ID for this analysis", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "Metaphlan_Analysis", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "use_group_representative", "argument": "--use_group_representative", "type": "boolean", "label": "Use a species as representative for species groups?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--use_group_representative", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "legacy_output", "argument": "--legacy-output", "type": "boolean", "label": "Old MetaPhlAn2 two columns output?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--legacy-output", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "CAMI_format_output", "argument": "--CAMI_format_output", "type": "boolean", "label": "Report the profiling using the CAMI output format?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--CAMI_format_output", "falsevalue": ""}, {"model_class": "BooleanToolParameter", "name": "unknown_estimation", "argument": "--unknown_estimation", "type": "boolean", "label": "Scale relative abundances to the number of reads mapping to known clades in order to estimate unknowness?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--unknown_estimation", "falsevalue": ""}]}], "outputs": [{"model_class": "ToolOutput", "name": "output_file", "format": "tabular", "label": "${tool.name} on ${on_string}: Predicted taxon relative abundances", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "bowtie2out", "format": "tabular", "label": "${tool.name} on ${on_string}: Bowtie2 output", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "sam_output_file", "format": "sam", "label": "${tool.name} on ${on_string}: SAM file", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2573", "edam_data": "data_0863", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "biom_output_file", "format": "biom1", "label": "${tool.name} on ${on_string}: BIOM file", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3746", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "metagenomic_analysis", "panel_section_name": "Metagenomic Analysis", "form_style": "regular"}