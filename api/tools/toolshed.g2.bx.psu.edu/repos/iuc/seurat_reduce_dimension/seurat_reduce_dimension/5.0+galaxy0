{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/seurat_reduce_dimension/seurat_reduce_dimension/5.0+galaxy0", "name": "Seurat Run Dimensional Reduction", "version": "5.0+galaxy0", "description": "- PCA, tSNE or UMAP", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "seurat_reduce_dimension", "owner": "iuc", "changeset_revision": "e49429e8d6dd", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "seurat_rds", "argument": null, "type": "data", "label": "Input file with the Seurat object", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rds"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "method", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "RunPCA", "inputs": [{"model_class": "TextToolParameter", "name": "assay", "argument": "assay", "type": "text", "label": "Name of assay to use", "help": "leave blank to use default assay", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "npcs", "argument": "npcs", "type": "integer", "label": "Number of PCs to compute", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "50", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "rev_pca", "argument": null, "type": "boolean", "label": "Compute the PCA on the 'gene x cell' matrix instead of 'cell x gene' matrix", "help": "(rev.pca)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "weight_by_var", "argument": null, "type": "boolean", "label": "Weight the cell embeddings by the variance of each PC", "help": "(weight.by.var)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "IntegerToolParameter", "name": "seed_use", "argument": null, "type": "integer", "label": "Set a random seed", "help": "(seed.use)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "42", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "approx", "argument": "approx", "type": "boolean", "label": "Use truncated singular value decomposition to approximate PCA", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "DataToolParameter", "name": "features", "argument": "features", "type": "data", "label": "List of features to compute PCA on", "help": "text file with one feature on each line, default is variable features", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["txt", "tabular"], "edam": {"edam_formats": ["format_2330", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "reduction_name", "argument": null, "type": "text", "label": "Name for dimensional reduction", "help": "(reduction.name)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pca", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "reduction_key", "argument": null, "type": "text", "label": "Dimensional reduction key", "help": "specifies the string before the number for the dimension names (reduction.key)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "PC_", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "print_pcs", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "false", "inputs": []}, {"model_class": "ConditionalWhen", "value": "true", "inputs": [{"model_class": "IntegerToolParameter", "name": "dims", "argument": "dims", "type": "integer", "label": "Number of PCs to print genes for", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "nfeatures", "argument": "nfeatures", "type": "integer", "label": "Number of top genes to print for each PC", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "print_pcs", "argument": null, "type": "select", "label": "Output list of top genes", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "false", "options": [["No", "false", true], ["Yes", "true", false]], "display": null, "multiple": false, "textable": false}}]}, {"model_class": "ConditionalWhen", "value": "RunTSNE", "inputs": [{"model_class": "TextToolParameter", "name": "reduction", "argument": "reduction", "type": "text", "label": "Name of reduction to use", "help": "default is pca", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pca", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "dims", "argument": "dims", "type": "integer", "label": "Number of dimensions from reduction to use as input", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "assay", "argument": "assay", "type": "text", "label": "Name of assay to use", "help": "leave blank to use default assay", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "tsne_method", "argument": null, "type": "select", "label": "Select the method to use to compute the tSNE", "help": "(tsne.method)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "Rtsne", "options": [["Rtsne", "Rtsne", true], ["FIt-SNE", "FIt-SNE", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "seed_use", "argument": null, "type": "integer", "label": "Set a random seed", "help": "(seed.use)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "dim_embed", "argument": null, "type": "integer", "label": "Set the dimensional space of the tSNE embedding", "help": "(dim.embed)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "reduction_name", "argument": null, "type": "text", "label": "Name for dimensional reduction", "help": "(reduction.name)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "tsne", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "reduction_key", "argument": null, "type": "text", "label": "Dimensional reduction key", "help": "specifies the string before the number for the dimension names (reduction.key)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "tSNE_", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "RunUMAP", "inputs": [{"model_class": "TextToolParameter", "name": "reduction", "argument": "reduction", "type": "text", "label": "Name of reduction to use", "help": "default is pca", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pca", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "assay", "argument": "assay", "type": "text", "label": "Name of assay to use", "help": "leave blank to use default assay", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "Conditional", "name": "umap_method", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "uwot", "inputs": []}, {"model_class": "ConditionalWhen", "value": "uwot-learn", "inputs": []}, {"model_class": "ConditionalWhen", "value": "umap-learn", "inputs": [{"model_class": "Conditional", "name": "densmap", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "TRUE", "inputs": [{"model_class": "IntegerToolParameter", "name": "dens_lambda", "argument": null, "type": "integer", "label": "Control the regularization weight of densMAP density correlation term", "help": "(dens.lambda)", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "dens_frac", "argument": null, "type": "float", "label": "Control the fraction of epochs where density-augmented objective is used in densMAP", "help": "(dens.frac)", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": true, "hidden": false, "is_dynamic": false, "value": "0.3", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "dens_var_shift", "argument": null, "type": "float", "label": "Constant to add to variance of local radii when calculating density correlation objective", "help": "(dens.var.shift)", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "0.1", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "FALSE", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "densmap", "argument": "densmap", "type": "select", "label": "Use the density-augmented objective of densMAP", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "FALSE", "options": [["Yes", "TRUE", false], ["No", "FALSE", true]], "display": null, "multiple": false, "textable": false}}]}], "test_param": {"model_class": "SelectToolParameter", "name": "umap_method", "argument": null, "type": "select", "label": "UMAP implementation to run", "help": "(umap.method)", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "uwot", "options": [["uwot", "uwot", true], ["uwot-learn", "uwot-learn", false], ["umap-learn", "umap-learn", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "IntegerToolParameter", "name": "n_neighbors", "argument": null, "type": "integer", "label": "Number of neighbors to use", "help": "Usually in range 5-50 (n.neighbors)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "30", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "n_components", "argument": null, "type": "integer", "label": "Dimension of the space to embed into", "help": "(n.components)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "2", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "metric", "argument": "metric", "type": "select", "label": "Choose metric to use to measure distances in the input space", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "cosine", "options": [["cosine", "cosine", true], ["correlation", "correlation", false], ["euclidean", "euclidean", false], ["manhattan", "manhattan", false], ["hamming", "hamming", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "Conditional", "name": "run_umap_on", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "dims", "inputs": [{"model_class": "IntegerToolParameter", "name": "dims", "argument": "dims", "type": "integer", "label": "Number of dimensions from reduction to use as input", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "features", "inputs": [{"model_class": "DataToolParameter", "name": "features", "argument": "features", "type": "data", "label": "Run UMAP on this subset of features", "help": "text file with one feature on each line", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["txt", "tabular"], "edam": {"edam_formats": ["format_2330", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "SelectToolParameter", "name": "slot", "argument": "slot", "type": "select", "label": "Slot to pull data from", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "data", "options": [["counts", "counts", false], ["data", "data", true], ["scale.data", "scale.data", false], ["raw.data", "raw.data", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "ConditionalWhen", "value": "graph", "inputs": [{"model_class": "TextToolParameter", "name": "graph", "argument": "graph", "type": "text", "label": "Name of graph on which to run UMAP", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "nn_name", "inputs": [{"model_class": "TextToolParameter", "name": "nn_name", "argument": null, "type": "text", "label": "Name of KNN output on which to run UMAP", "help": "(nn.name)", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "run_umap_on", "argument": null, "type": "select", "label": "Run UMAP on dimensions, features, graph or KNN output", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "dims", "options": [["dims", "dims", true], ["features", "features", false], ["graph", "graph", false], ["nn.name", "nn_name", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "adv", "type": "section", "title": "Advanced Options", "help": null, "expanded": false, "inputs": [{"model_class": "TextToolParameter", "name": "reduction_model", "argument": null, "type": "text", "label": "DimReduct object that contains the umap model", "help": "(reduction.model)", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "n_epochs", "argument": null, "type": "integer", "label": "Set the number of training epochs to use to optimise the embedding", "help": "if left empty, will be set as 500 for small datasets, 200 for large datasets (n.epochs)", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "learning_rate", "argument": null, "type": "integer", "label": "Initial learning rate for the embedding optimization", "help": "(learning.rate)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "min_dist", "argument": null, "type": "float", "label": "Control how tightly points are compressed in the embedding", "help": "sensible values are in the range 0.001 to 0.5 (min.dist)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.3", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "spread", "argument": "spread", "type": "integer", "label": "Effective spread of embedded points", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "set_op_mix_ratio", "argument": null, "type": "float", "label": "Interpolate between fuzzy union and intersection", "help": "(set.op.mix.ratio)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "local_connectivity", "argument": null, "type": "integer", "label": "Set local connectivity", "help": "the number of nearest neighbors assummed to connect at local level (local.connectivity)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "repulsion_strength", "argument": null, "type": "integer", "label": "Apply weighting to negative values", "help": "(repulsion.strength)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "negative_sample_rate", "argument": null, "type": "integer", "label": "Number of negative samples to select per positive sample during optimization", "help": "(negative.sample.rate)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "a", "argument": "a", "type": "text", "label": "Parameter 'a' of differentiable approximation of right adjoint functor", "help": "automatically set if left empty", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "b", "argument": "b", "type": "text", "label": "Parameter 'b' of differentiable approximation of right adjoint functor", "help": "automatically set if left empty", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "uwot_sgd", "argument": null, "type": "boolean", "label": "Set uwot::umap(fast_sgd = TRUE)", "help": "(uwot.sgd)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "IntegerToolParameter", "name": "seed_use", "argument": null, "type": "integer", "label": "Set a random seed", "help": "(seed.use)", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "42", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "angular_rp_forest", "argument": null, "type": "boolean", "label": "Use an angular random projection forest to initialise nearest neighbors", "help": "(angular.rp.forest)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "TextToolParameter", "name": "reduction_name", "argument": null, "type": "text", "label": "Name for dimensional reduction", "help": "(reduction.name)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "umap", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "reduction_key", "argument": null, "type": "text", "label": "Dimensional reduction key", "help": "specifies the string before the number for the dimension names (reduction.key)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "UMAP_", "area": false, "datalist": []}]}]}], "test_param": {"model_class": "SelectToolParameter", "name": "method", "argument": null, "type": "select", "label": "Method used", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "RunPCA", "options": [["Run a PCA dimensionality reduction using 'RunPCA'", "RunPCA", false], ["Run a t-SNE dimensionality reduction using 'RunTSNE'", "RunTSNE", false], ["Run a UMAP dimensional reduction using 'RunUMAP'", "RunUMAP", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Section", "name": "advanced_common", "type": "section", "title": "Advanced Output", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "show_log", "argument": null, "type": "boolean", "label": "Output Log?", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}]}], "outputs": [{"model_class": "ToolOutput", "name": "rds_out", "format": "rds", "label": "${tool.name} (${method.method}) on ${on_string}: RDS", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "seurat.rds", "edam_format": "format_2333", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "hidden_output", "format": "txt", "label": "Log file", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "top_pcs", "format": "txt", "label": "${tool.name} Print PCs on ${on_string}", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "print_pcs.txt", "edam_format": "format_2330", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "rna_analysis", "panel_section_name": "RNA Analysis", "form_style": "regular"}