{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/iuc/infercnv/infercnv/1.20.0+galaxy0", "name": "InferCNV", "version": "1.20.0+galaxy0", "description": "Infer Copy Number Variation from Single-Cell RNA-Seq Data", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "infercnv", "owner": "iuc", "changeset_revision": "be7c0c692879", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "raw_mtx", "argument": null, "type": "data", "label": "Raw counts matrix", "help": "The matrix of genes (rows) vs. cells (columns) containing the raw counts", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "annotation", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "local", "inputs": [{"model_class": "DataToolParameter", "name": "gene_order", "argument": null, "type": "data", "label": "Gene order file", "help": "Tabular file containing the positions of each gene along each chromosome in the genome.", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "gtf", "inputs": [{"model_class": "DataToolParameter", "name": "gtf_file", "argument": null, "type": "data", "label": "GTF file", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["gtf", "gtf.gz"], "edam": {"edam_formats": ["format_2306", null], "edam_data": ["data_1255", null]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "attribute", "argument": null, "type": "text", "label": "attribute name", "help": "The name of the attribute in the GTF attributes to use, for example 'gene_name' or 'transcript_id'", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "gene_id", "area": false, "datalist": []}]}], "test_param": {"model_class": "SelectToolParameter", "name": "gene_annotation", "argument": null, "type": "select", "label": "Gene annotation", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "local", "options": [["Use a gene order file: ", "local", false], ["use a GTF file: ", "gtf", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "DataToolParameter", "name": "cell_annotations", "argument": null, "type": "data", "label": "Cell annotations file", "help": "A description of the cells, indicating the cell type classifications", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["tabular"], "edam": {"edam_formats": ["format_3475"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "ref_group", "argument": null, "type": "text", "label": "Reference group names", "help": "A vector containing the classifications of the reference (normal) cells to use for infering cnv", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "Section", "name": "advanced", "type": "section", "title": "Advanced parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "max_cell", "argument": null, "type": "integer", "label": "Maximun number of cells to use per group.", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "min_count", "argument": null, "type": "integer", "label": "Minimum counts allowed per cell.", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "100", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "max_count", "argument": null, "type": "integer", "label": "Maximum counts allowed per cell.", "help": "", "refresh_on_change": false, "min": 0, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "chr_exclude", "argument": null, "type": "text", "label": "Chromosomes to exclude", "help": "Chromosomes to exclude from the analysis", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "\"chrX\", \"chrY\", \"chrM\"", "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "cutoff", "argument": null, "type": "float", "label": "Cutoff", "help": "The cutoff value to use for infercnv", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "min_cells_per_gene", "argument": null, "type": "integer", "label": "Minimum cells per gene", "help": "minimum number of reference cells requiring expression measurements to include the corresponding gene.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}, {"model_class": "Section", "name": "smoothing", "type": "section", "title": "Smoothing parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "window_length", "argument": null, "type": "integer", "label": "Window length", "help": "Length of the window for the moving average (smoothing). Should be an odd integer.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "101", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "smooth_method", "argument": null, "type": "select", "label": "Smoothing method", "help": "The method to use for smoothing", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "pyramidinal", "options": [["pyramidinal", "pyramidinal", false], ["runmeans", "runmeans", false], ["coordinates", "coordinates", false]], "display": null, "multiple": false, "textable": false}]}, {"model_class": "Section", "name": "clustering", "type": "section", "title": "Clustering parameters", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "cluster_by_groups", "argument": null, "type": "boolean", "label": "Cluster by groups", "help": "Whether to cluster by groups", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "cluster_references", "argument": null, "type": "boolean", "label": "Cluster references", "help": "Whether to cluster references within their annotations or not", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "IntegerToolParameter", "name": "k_obs_groups", "argument": null, "type": "integer", "label": "K obs groups", "help": "Number of groups in which to break the observations", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "hclust_method", "argument": null, "type": "select", "label": "Hclust method", "help": "Method used for hierarchical clustering of cells.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "ward.D2", "options": [["ward.D2", "ward.D2", false], ["ward.D", "ward.D", false], ["single", "single", false], ["complete", "complete", false], ["average", "average", false], ["mcquitty", "mcquitty", false], ["median", "median", false], ["centroid", "centroid", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "BooleanToolParameter", "name": "scale_data", "argument": null, "type": "boolean", "label": "Scale data", "help": "Whether to scale the data", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}, {"model_class": "Section", "name": "HMM", "type": "section", "title": "HMM parameters", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "HMM", "argument": null, "type": "boolean", "label": "HMM", "help": "Whether to run HMM to predict CNV level", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "SelectToolParameter", "name": "HMM_report_by", "argument": null, "type": "select", "label": "HMM report by", "help": "Note, reporting is performed entirely separately from the HMM prediction. So, you can predict on subclusters, but get per-cell level reporting (more voluminous output", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "subcluster", "options": [["subcluster", "subcluster", false], ["cell", "cell", false], ["consensus", "consensus", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "HMM_type", "argument": null, "type": "select", "label": "HMM model type", "help": "The type of HMM to use", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "i6", "options": [["i6", "i6", false], ["i3", "i3", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "FloatToolParameter", "name": "BayesMaxPNormal", "argument": null, "type": "float", "label": "Bayes max p normal", "help": "Maximum P(Normal) allowed for a CNV prediction according to BayesNet. (zero turns it off)", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.5", "area": false, "datalist": []}]}, {"model_class": "Section", "name": "tumor_subclustering", "type": "section", "title": "Tumor subclustering parameters", "help": null, "expanded": false, "inputs": [{"model_class": "SelectToolParameter", "name": "analysis_mode", "argument": null, "type": "select", "label": "Analysis mode", "help": "Grouping level for image filtering or HMM predictions. default: samples (fastest, but subclusters is ideal)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "samples", "options": [["samples", "samples", false], ["subclusters", "subclusters", false], ["cells", "cells", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "tumor_subcluster_partition_method", "argument": null, "type": "select", "label": "Tumor subcluster partition method", "help": "Method for defining tumor subclusters.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "leiden", "options": [["leiden", "leiden", false], ["random_trees", "random_trees", false], ["qnorm", "qnorm", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "k_nn", "argument": null, "type": "integer", "label": "KNN", "help": "number k of nearest neighbors to search for when using the Leiden partition method for subclustering", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "20", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "leiden_method", "argument": null, "type": "select", "label": "Leiden method", "help": "Method used to generate the graph on which the Leiden algorithm is applied", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "PCA", "options": [["PCA", "PCA", false], ["simple", "simple", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "leiden_function", "argument": null, "type": "select", "label": "Leiden function", "help": "Whether to use the Constant Potts Model (CPM) or modularity in igraph.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "CPM", "options": [["CPM", "CPM", false], ["modularity", "modularity", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "leiden_method_per_chr", "argument": null, "type": "select", "label": "Leiden method per chr", "help": "Method used to generate the graph on which the Leiden algorithm is applied for the per chromosome subclustering.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "simple", "options": [["simple", "simple", false], ["PCA", "PCA", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "leiden_function_per_chr", "argument": null, "type": "select", "label": "Leiden function per chr", "help": "Whether to use the Constant Potts Model (CPM) or modularity in igraph for the per chromosome subclustering.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "modularity", "options": [["modularity", "modularity", false], ["CPM", "CPM", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "leiden_resolution_per_chr", "argument": null, "type": "integer", "label": "Leiden resolution per chr", "help": "esolution parameter for the Leiden algorithm for the per chromosome subclustering.", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "per_chr_hmm_subclusters", "argument": null, "type": "boolean", "label": "Per chr HMM subclusters", "help": "Run subclustering per chromosome over all cells combined to run the HMM on those subclusters instead. Only applicable when using leiden subclustering.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "per_chr_hmm_subclusters_references", "argument": null, "type": "boolean", "label": "Per chr HMM subclusters references", "help": "Whether the per chromosome subclustering should also be done on references", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "FloatToolParameter", "name": "z_score_filter", "argument": null, "type": "float", "label": "Z score treshold", "help": "Z-score used as a treshold to filter genes used for subclustering. Applied to remove genes with high expression variability such as MHC genes. ", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "0.8", "area": false, "datalist": []}]}, {"model_class": "Section", "name": "denoise", "type": "section", "title": "Denoising parameters", "help": null, "expanded": false, "inputs": [{"model_class": "BooleanToolParameter", "name": "denoise", "argument": null, "type": "boolean", "label": "Denoise", "help": "Whether to denoise the data", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "IntegerToolParameter", "name": "noise_filter", "argument": null, "type": "integer", "label": "Noise filter", "help": "Values +- from the reference cell mean will be set to zero", "refresh_on_change": false, "min": 0, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "FloatToolParameter", "name": "sd_amplifier", "argument": null, "type": "float", "label": "SD amplifier", "help": "Noise is defined as mean(reference_cells) +- sdev(reference_cells) * sd_amplifier", "refresh_on_change": false, "min": 0.0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.5", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "noise_logistic", "argument": null, "type": "boolean", "label": "Noise logistic", "help": "use the noise_filter or sd_amplifier based threshold (whichever is invoked) as the midpoint in a logistic model for downscaling values close to the mean.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}, {"model_class": "BooleanToolParameter", "name": "median_filter", "argument": null, "type": "boolean", "label": "Median filter", "help": "Apply the median filtering to smooth the visual output of inferCNV", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}]}, {"model_class": "Section", "name": "plotting", "type": "section", "title": "Plotting parameters", "help": null, "expanded": false, "inputs": [{"model_class": "IntegerToolParameter", "name": "png_res", "argument": null, "type": "integer", "label": "PNG resolution", "help": "Resolution of the PNG files", "refresh_on_change": false, "min": 0, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "300", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "diagnostics", "argument": null, "type": "boolean", "label": "Diagnostics", "help": "Create diagnostic plots after running the Bayesian model", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "TRUE", "falsevalue": "FALSE"}]}]}], "outputs": [{"model_class": "ToolOutputCollection", "name": "infercnv_results", "format": null, "label": "${tool.name} on ${on_string}: InferCNV Results", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "list", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": "tabular", "visible": false, "assign_primary_output": false, "directory": "output", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "(?P<name>.+)\\.txt$", "sort_by": "filename"}]}}, {"model_class": "ToolOutputCollection", "name": "infercnv_plots", "format": null, "label": "${tool.name} on ${on_string}: InferCNV plots", "hidden": false, "output_type": "collection", "default_format": "data", "default_format_source": null, "default_metadata_source": null, "inherit_format": false, "inherit_metadata": false, "structure": {"collection_type": "list", "collection_type_source": null, "collection_type_from_rules": null, "structured_like": null, "discover_datasets": [{"discover_via": "pattern", "dbkey": "__input__", "format": "png", "visible": false, "assign_primary_output": false, "directory": "output", "recurse": false, "match_relative_path": false, "sort_key": "filename", "sort_comp": "lexical", "pattern": "(?P<name>.+)\\.png$", "sort_by": "filename"}]}}, {"model_class": "ToolOutput", "name": "gene_order", "format": "tabular", "label": "Gene order file", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "gene_order.tabular", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "single-cell", "panel_section_name": "Single-cell", "form_style": "regular"}