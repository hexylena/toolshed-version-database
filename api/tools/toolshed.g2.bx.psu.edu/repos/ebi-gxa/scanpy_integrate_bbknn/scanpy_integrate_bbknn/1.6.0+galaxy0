{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/ebi-gxa/scanpy_integrate_bbknn/scanpy_integrate_bbknn/1.9.3+galaxy0", "name": "Scanpy BBKNN", "version": "1.9.3+galaxy0", "description": "batch-balanced K-nearest neighbours", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "scanpy_integrate_bbknn", "owner": "ebi-gxa", "changeset_revision": "c9da9192eee5", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "input_obj_file", "argument": "input-object-file", "type": "data", "label": "Input object in AnnData/Loom format", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5", "h5ad"], "edam": {"edam_formats": ["format_3590", "format_3590"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "SelectToolParameter", "name": "input_format", "argument": "--input-format", "type": "select", "label": "Format of input object", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "anndata", "options": [["AnnData format hdf5", "anndata", true], ["Loom format hdf5", "loom", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "SelectToolParameter", "name": "output_format", "argument": "--output-format", "type": "select", "label": "Format of output object", "help": "AnnData or Loom. Legacy 'h5' datatypes are useful for interacting with older tools. Choosing 'No packaged matrix output' is useful for cases where auxiliary files are generated (like in marker genes). Do not use when there are no other output files, as the tool will generate no output in Galaxy then.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "anndata_h5ad", "options": [["AnnData format", "anndata_h5ad", true], ["AnnData format (h5 for older versions)", "anndata", false], ["Loom format", "loom", false], ["Loom format (h5 for older versions)", "loom_legacy", false], ["No packaged matrix output", "no_matrix_output", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "TextToolParameter", "name": "batch_key", "argument": "--batch-key", "type": "text", "label": "The name of the column in adata.obs that differentiates among experiments/batches.", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "Conditional", "name": "settings", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "true", "inputs": []}, {"model_class": "ConditionalWhen", "value": "false", "inputs": [{"model_class": "TextToolParameter", "name": "use_rep", "argument": "--use-rep", "type": "text", "label": "The dimensionality reduction in .obsm to use for neighbour detection.", "help": "", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "X_pca", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "key_added", "argument": "--key-added", "type": "text", "label": "Key under which to add the computed results.", "help": "If not specified, the neighbors data is stored in .uns[\u2018neighbors\u2019], distances and connectivities are stored in .obsp[\u2018distances\u2019] and .obsp[\u2018connectivities\u2019] respectively. If specified, the neighbors data is added to .uns[key_added], distances are stored in .obsp[key_added+\u2019_distances\u2019] and connectivities in .obsp[key_added+\u2019_connectivities\u2019].", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "n_pcs", "argument": "--n-pcs", "type": "integer", "label": "Number of PCs to use", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "50", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "approx", "argument": "--no-approx", "type": "boolean", "label": "Use annoy\u2019s approximate neighbour finding?", "help": "This results in a quicker run time for large datasets while also potentially increasing the degree of batch correction.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "", "falsevalue": "--no-approx"}, {"model_class": "SelectToolParameter", "name": "metric", "argument": "--metric", "type": "select", "label": "A known metric\u2019s name", "help": "", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "angular", "options": [["angular", "angular", true], ["Euclidean", "euclidean", false], ["cityblock", "cityblock", false], ["cosine", "cosine", false], ["l1", "l1", false], ["l2", "l2", false], ["manhattan", "manhattan", false], ["braycurtis", "braycurtis", false], ["canberra", "canberra", false], ["chebyshev", "chebyshev", false], ["correlation", "correlation", false], ["dice", "dice", false], ["hamming", "hamming", false], ["jaccard", "jaccard", false], ["kulsinski", "kulsinski", false], ["mahalanobis", "mahalanobis", false], ["minkowski", "minkowski", false], ["rogerstanimoto", "rogerstanimoto", false], ["russelrao", "russelrao", false], ["seuclidian", "seuclidan", false], ["sokalmichener", "sokalmichener", false], ["sokalsneath", "sokalsneath", false], ["sqeuclidean", "sqeuclidean", false], ["yule", "yule", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "neighbors_within_batch", "argument": "--neighbors-within-batch", "type": "integer", "label": "How many top neighbours to report for each batch", "help": "Total number of neighbours will be this number times the number of batches.", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "3", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "trim", "argument": "--trim", "type": "integer", "label": "Trim the neighbours of each cell to these many top connectivities.", "help": "May help with population independence and improve the tidiness of clustering. The lower the value the more independent the individual populations, at the cost of more conserved batch effect. If not set, sets the parameter value automatically to 10 times the total number of neighbours for each cell. Set to 0 to skip.", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "n_trees", "argument": "--n-trees", "type": "integer", "label": "The number of trees to construct in the annoy forest.", "help": "More trees give higher precision when querying, at the cost of increased run time and resource intensity.", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "10", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "use_faiss", "argument": "--no-use-faiss", "type": "boolean", "label": "Use the faiss package to compute nearest neighbours if installed", "help": "If approx=False and the metric is 'euclidean' use the faiss package to compute nearest neighbours if installed. This improves performance at a minor cost to numerical precision as faiss operates on float32.", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "", "falsevalue": "--no-use-faiss"}, {"model_class": "FloatToolParameter", "name": "set_op_mix_ratio", "argument": "--set-op-mix-ratio", "type": "float", "label": "UMAP connectivity computation parameter", "help": "Float between 0 and 1, controlling the blend between a connectivity matrix formed exclusively from mutual nearest neighbour pairs (0) and a union of all observed neighbour relationships with the mutual pairs emphasised (1).", "refresh_on_change": false, "min": 0.0, "max": 1.0, "optional": false, "hidden": false, "is_dynamic": false, "value": "1.0", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "local_connectivity", "argument": "--local-connectivity", "type": "integer", "label": "UMAP connectivity computation parameter, how many nearest neighbors of each cell are assumed to be fully connected (and given a connectivity value of 1).", "help": "", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}]}], "test_param": {"model_class": "BooleanToolParameter", "name": "default", "argument": null, "type": "boolean", "label": "Use programme defaults", "help": "", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "true", "falsevalue": "false"}}], "outputs": [{"model_class": "ToolOutput", "name": "output_h5ad", "format": "h5ad", "label": "${tool.name} on ${on_string}: Batch-corrected for ${batch_key} AnnData", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "output.h5", "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_h5", "format": "h5", "label": "${tool.name} on ${on_string}: Batch-corrected for ${batch_key} AnnData (h5)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "output.h5", "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_loom_legacy", "format": "h5", "label": "${tool.name} on ${on_string}: Batch-corrected for ${batch_key} Loom", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "output.h5", "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "output_loom", "format": "loom", "label": "${tool.name} on ${on_string}: Batch-corrected for ${batch_key} Loom (h5)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "output.h5", "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "hca_sc_scanpy_tools", "panel_section_name": "HCA-Scanpy", "form_style": "regular"}