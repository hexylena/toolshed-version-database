{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/ebi-gxa/decoupler_pseudobulk/decoupler_pseudobulk/1.4.0+galaxy10", "name": "Decoupler pseudo-bulk", "version": "1.4.0+galaxy10", "description": "aggregates single cell RNA-seq data for running bulk RNA-seq methods", "labels": [], "icon": null, "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "decoupler_pseudobulk", "owner": "ebi-gxa", "changeset_revision": "2557d7869e78", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "DataToolParameter", "name": "input_file", "argument": null, "type": "data", "label": "Input AnnData file", "help": "", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["data"], "edam": {"edam_formats": ["format_1915"], "edam_data": ["data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "Conditional", "name": "filter_per_contrast", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "yes", "inputs": [{"model_class": "DataToolParameter", "name": "contrasts_file", "argument": null, "type": "data", "label": "Contrasts file", "help": "A file with header and arithmetic operations between existing values in the Groupby column in the AnnData file.", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["txt", "tabular"], "edam": {"edam_formats": ["format_2330", "format_3475"], "edam_data": ["data_0006", "data_0006"]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "FloatToolParameter", "name": "min_cells_perc_per_contrast_cond", "argument": null, "type": "float", "label": "Min. percentage of cells that need to be expressing a gene in any of the conditions of a contrast", "help": "Genes whose expression across all conditions of a contrast are below this threshold are tagged for removal from the contrast on a separate file", "help_format": "html", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "20.0", "area": false, "datalist": []}]}, {"model_class": "ConditionalWhen", "value": "no", "inputs": []}], "test_param": {"model_class": "SelectToolParameter", "name": "filter", "argument": null, "type": "select", "label": "Produce a list of genes to filter out per contrast?", "help": "TODO", "help_format": "html", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "no", "options": [["Yes", "yes", false], ["No", "no", true]], "display": null, "multiple": false, "textable": false}}, {"model_class": "TextToolParameter", "name": "adata_obs_fields_to_merge", "argument": null, "type": "text", "label": "Obs Fields to Merge", "help": "Fields in adata.obs to merge, comma separated (optional). They will be available as field1_field2_field3 in the AnnData Obs dataframe. You can have multiple groups to merge, separated by colon (:).", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "groupby", "argument": null, "type": "text", "label": "Groupby column", "help": "The column in adata.obs that defines the groups. Merged columns in the above field are available here.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "sample_key", "argument": null, "type": "text", "label": "Sample Key column", "help": "The column in adata.obs that defines the samples. Merged columns in the above field are available here.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "layer", "argument": null, "type": "text", "label": "Layer", "help": "The name of the layer of the AnnData object to use. It needs to be present in the AnnData object.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "mode", "argument": null, "type": "select", "label": "Decoupler pseudobulk Mode", "help": "Determines how counts are aggregated across cells with the specificied groups: sum, mean or median.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "sum", "options": [["sum", "sum", true], ["mean", "mean", false], ["median", "median", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "TextToolParameter", "name": "factor_fields", "argument": null, "type": "text", "label": "Factor Fields", "help": "Fields in adata.obs to use as factors, comma separated (optional). For EdgeR make sure that the first field is the main contrast field desired and the rest of the fields are the covariates desired. Decoupler produces two fields in the intermediate AnnData (which can be added here if desired for covariates): psbulk_n_cells and psbulk_counts.", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "use_raw", "argument": null, "type": "boolean", "label": "Use Raw", "help": "", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "IntegerToolParameter", "name": "min_cells", "argument": null, "type": "integer", "label": "Minimum Cells", "help": "", "help_format": "html", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "produce_plots", "argument": null, "type": "boolean", "label": "Produce plots", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "BooleanToolParameter", "name": "produce_anndata", "argument": null, "type": "boolean", "label": "Produce AnnData with Pseudo-bulk", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "IntegerToolParameter", "name": "min_counts", "argument": null, "type": "integer", "label": "Minimum Counts", "help": "", "help_format": "html", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "min_total_counts", "argument": null, "type": "integer", "label": "Minimum Total Counts", "help": "", "help_format": "html", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "min_counts_per_sample", "argument": null, "type": "integer", "label": "Minimum counts per gene per contrast field", "help": "Used to signal genes that should be excluded per contrast field after DE, to avoid very lowly expressed genes in specific contrasts. Genes are not excluded from the result, but a separate file tagging them is produced.", "help_format": "html", "refresh_on_change": false, "min": null, "max": null, "optional": false, "hidden": false, "is_dynamic": false, "value": "20", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "filter_expr", "argument": null, "type": "boolean", "label": "Enable Filtering by Expression", "help": "", "help_format": "html", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "true", "falsevalue": "false"}, {"model_class": "TextToolParameter", "name": "plot_samples_figsize", "argument": null, "type": "text", "label": "Plot Samples Figsize", "help": "X and Y sizes in points separated by a space", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "10 10", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "plot_filtering_figsize", "argument": null, "type": "text", "label": "Plot Filtering Figsize", "help": "X and Y sizes in points separated by a space", "help_format": "html", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "10 10", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "num_pseudo_replicates", "argument": null, "type": "integer", "label": "Number of Pseudo Replicates", "help": "If set, create this number of pseudo replicates to create per sample (at least 3). If not set, there is an expectation that samples and groups are distributed in a way that (pseudo) replicates exists.", "help_format": "html", "refresh_on_change": false, "min": 3, "max": 1000, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "seed", "argument": null, "type": "integer", "label": "Seed", "help": "Seed for the random number generator used for sampling the pseudo replicates (only used if Number of Pseudo replicates set).", "help_format": "html", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}], "outputs": [{"model_class": "ToolOutput", "name": "pbulk_anndata", "format": "h5ad", "label": "${tool.name} on ${on_string}: Pseudo-bulk AnnData", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "count_matrix", "format": "tabular", "label": "${tool.name} on ${on_string}: Count Matrix", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "deseq_output_dir/counts_matrix.tsv", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "samples_metadata", "format": "tabular", "label": "${tool.name} on ${on_string}: Samples Metadata (factors file)", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "deseq_output_dir/col_metadata.tsv", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "genes_metadata", "format": "tabular", "label": "${tool.name} on ${on_string}: Genes Metadata", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "deseq_output_dir/gene_metadata.tsv", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "plot_output", "format": "png", "label": "${tool.name} on ${on_string}: Pseudobulk plot", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "plots_output_dir/pseudobulk_samples.png", "edam_format": "format_3603", "edam_data": "data_2968", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "filter_by_expr_plot", "format": "png", "label": "${tool.name} on ${on_string}: Filter by Expression plot", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "plots_output_dir/filter_by_expr.png", "edam_format": "format_3603", "edam_data": "data_2968", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "genes_ignore_per_contrast_field", "format": "tabular", "label": "${tool.name} on ${on_string}: Genes to ignore by contrast field", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "deseq_output_dir/genes_to_ignore_per_contrast_field.tsv", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "genes_ignore_per_contrast", "format": "tabular", "label": "${tool.name} on ${on_string}: Genes to ignore by contrast", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": null, "parent": null, "count": 1, "from_work_dir": "plots_output_dir/genes_to_filter_by_contrast.tsv", "edam_format": "format_3475", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "hca_sc_label_analysis_tools", "panel_section_name": "CellTypeScan", "form_style": "regular"}