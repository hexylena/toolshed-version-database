{"model_class": "Tool", "id": "toolshed.g2.bx.psu.edu/repos/ebi-gxa/seurat_integration/seurat_integration/4.0.4+galaxy0", "name": "Seurat integration", "version": "4.0.4+galaxy0", "description": "merges datasets based on internal anchors or reference based", "labels": [], "edam_operations": [], "edam_topics": [], "hidden": "", "is_workflow_compatible": true, "xrefs": [], "tool_shed_repository": {"name": "seurat_integration", "owner": "ebi-gxa", "changeset_revision": "dd6db951c33a", "tool_shed": "toolshed.g2.bx.psu.edu"}, "inputs": [{"model_class": "SelectToolParameter", "name": "format", "argument": null, "type": "select", "label": "Choose the format of the output", "help": "Seurat, Single Cell Experiment, AnnData or Loom", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "rds_seurat", "options": [["RDS with a Seurat object", "rds_seurat", true], ["AnnData written by Seurat", "anndata", false], ["Loom", "loom", false], ["RDS with a Single Cell Experiment object", "rds_sce", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "Conditional", "name": "input", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "anndata", "inputs": [{"model_class": "DataToolParameter", "name": "anndata_file", "argument": null, "type": "data", "label": "AnnData file", "help": "Select AnnData files for input", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5", "h5ad"], "edam": {"edam_formats": ["format_3590", "format_3590"], "edam_data": ["data_0006", "data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "loom", "inputs": [{"model_class": "DataToolParameter", "name": "loom_file", "argument": null, "type": "data", "label": "Loom file", "help": "Select Loom file(s) for input", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5", "h5loom"], "edam": {"edam_formats": ["format_3590", null], "edam_data": ["data_0006", null]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "rds_seurat", "inputs": [{"model_class": "DataToolParameter", "name": "rds_seurat_file", "argument": null, "type": "data", "label": "RDS file", "help": "Select RDS file(s) with Seurat object for input", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "rds_sce", "inputs": [{"model_class": "DataToolParameter", "name": "rds_sce_file", "argument": null, "type": "data", "label": "RDS file", "help": "Select RDS file(s) with Single Cell Experiment object for input", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "h5seurat", "inputs": [{"model_class": "DataToolParameter", "name": "h5seurat_file", "argument": null, "type": "data", "label": "Seurat HDF5", "help": "Select Seurat HDF5 file(s) for @VARNAME", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "format", "argument": null, "type": "select", "label": "Choose the format of the input", "help": "Seurat RDS, Seurat H5, Single Cell Experiment RDS, Loom or AnnData", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "rds_seurat", "options": [["RDS with a Seurat object", "rds_seurat", true], ["Loom", "loom", false], ["Seurat HDF5", "h5seurat", false], ["AnnData", "anndata", false], ["RDS with a Single Cell Experiment object", "rds_sce", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "Conditional", "name": "reference", "type": "conditional", "cases": [{"model_class": "ConditionalWhen", "value": "anndata", "inputs": [{"model_class": "DataToolParameter", "name": "anndata_file", "argument": null, "type": "data", "label": "AnnData file", "help": "Select AnnData files for reference", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5", "h5ad"], "edam": {"edam_formats": ["format_3590", "format_3590"], "edam_data": ["data_0006", "data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "loom", "inputs": [{"model_class": "DataToolParameter", "name": "loom_file", "argument": null, "type": "data", "label": "Loom file", "help": "Select Loom file(s) for reference", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5", "h5loom"], "edam": {"edam_formats": ["format_3590", null], "edam_data": ["data_0006", null]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "rds_seurat", "inputs": [{"model_class": "DataToolParameter", "name": "rds_seurat_file", "argument": null, "type": "data", "label": "RDS file", "help": "Select RDS file(s) with Seurat object for reference", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "rds_sce", "inputs": [{"model_class": "DataToolParameter", "name": "rds_sce_file", "argument": null, "type": "data", "label": "RDS file", "help": "Select RDS file(s) with Single Cell Experiment object for reference", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["rdata"], "edam": {"edam_formats": ["format_2333"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}, {"model_class": "ConditionalWhen", "value": "h5seurat", "inputs": [{"model_class": "DataToolParameter", "name": "h5seurat_file", "argument": null, "type": "data", "label": "Seurat HDF5", "help": "Select Seurat HDF5 file(s) for @VARNAME", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["h5"], "edam": {"edam_formats": ["format_3590"], "edam_data": ["data_0006"]}, "multiple": true, "min": null, "max": null, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}]}], "test_param": {"model_class": "SelectToolParameter", "name": "format", "argument": null, "type": "select", "label": "Choose the format of the reference", "help": "Seurat RDS, Seurat H5, Single Cell Experiment RDS, Loom or AnnData", "refresh_on_change": true, "optional": false, "hidden": false, "is_dynamic": false, "value": "rds_seurat", "options": [["RDS with a Seurat object", "rds_seurat", true], ["Loom", "loom", false], ["Seurat HDF5", "h5seurat", false], ["AnnData", "anndata", false], ["RDS with a Single Cell Experiment object", "rds_sce", false]], "display": null, "multiple": false, "textable": false}}, {"model_class": "TextToolParameter", "name": "assay_list", "argument": "--assay-list", "type": "text", "label": "Assay-list", "help": "A vector of assay names specifying which assay to use when constructing anchors. If NULL, the current default assay for each object is used.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "DataToolParameter", "name": "anchor_features_file", "argument": "--anchor-features_file", "type": "data", "label": "Anchor-features_file", "help": "File option for anchor-features. This overrides the string option if set.", "refresh_on_change": true, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "extensions": ["?"], "edam": {"edam_formats": [null], "edam_data": [null]}, "multiple": false, "options": {"dce": [], "ldda": [], "hda": [], "hdca": []}, "tag": null}, {"model_class": "TextToolParameter", "name": "anchor_features", "argument": "--anchor-features", "type": "text", "label": "Anchor-features", "help": "A numeric value (this will call 'SelectIntegrationFeatures' to select the provided number of features to be used in anchor finding) or a file with a vector of features to be used as input to the anchor finding process (comma separated)", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "2000", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "scale", "argument": "--do-not-scale", "type": "boolean", "label": "Scale", "help": "Whether or not to scale the features provided. Only call if you have previously scaled the features you want to use for each object in the object.list", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "", "falsevalue": "--do-not-scale"}, {"model_class": "SelectToolParameter", "name": "normalization_method", "argument": "--normalization-method", "type": "select", "label": "Normalization method", "help": "Name of normalization method used: LogNormalize or SCT", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "LogNormalize", "options": [["LogNormalize", "LogNormalize", true], ["SCT", "SCT", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "TextToolParameter", "name": "sct_clip_range", "argument": "--sct-clip-range", "type": "text", "label": "Sct clip range", "help": "Numeric of length two specifying the min and max values the Pearson residual will be clipped to", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "reduction", "argument": "--reduction", "type": "select", "label": "Reduction", "help": "Dimensional reduction to perform when finding anchors. Can be cca (Canonical correlation analysis) or rpca (Reciprocal PCA)", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "cca", "options": [["Canonical correlation analysis", "cca", true], ["Reciprocal PCA", "rpca", false]], "display": null, "multiple": false, "textable": false}, {"model_class": "BooleanToolParameter", "name": "l2_norm", "argument": "--do-not-l2-norm", "type": "boolean", "label": "L2 norm", "help": "Perform L2 normalization on the CCA cell embeddings after dimensional reduction", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": true, "truevalue": "", "falsevalue": "--do-not-l2-norm"}, {"model_class": "TextToolParameter", "name": "dims", "argument": "--dims", "type": "text", "label": "Dims", "help": "Which dimensions to use from the CCA to specify the neighbor search space", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "1:30", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "k_anchor", "argument": "--k-anchor", "type": "integer", "label": "K anchor", "help": "How many neighbors (k) to use when picking anchors", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "5", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "k_filter", "argument": "--k-filter", "type": "integer", "label": "K filter", "help": "How many neighbors (k) to use when filtering anchors", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "200", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "k_score", "argument": "--k-score", "type": "integer", "label": "K score", "help": "How many neighbors (k) to use when scoring anchors", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "30", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "max_features", "argument": "--max-features", "type": "integer", "label": "Max features", "help": "The maximum number of features to use when specifying the neighborhood search space in the anchor filtering", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "200", "area": false, "datalist": []}, {"model_class": "SelectToolParameter", "name": "nn_method", "argument": "--nn-method", "type": "select", "label": "Nn method", "help": "Method for nearest neighbor finding. Options include: rann, annoy", "refresh_on_change": false, "optional": false, "hidden": false, "is_dynamic": false, "value": "annoy", "options": [["rann", "rann", false], ["annoy", "annoy", true]], "display": null, "multiple": false, "textable": false}, {"model_class": "IntegerToolParameter", "name": "n_trees", "argument": "--n-trees", "type": "integer", "label": "N trees", "help": "More trees gives higher precision when using annoy approximate nearest neighbor search", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "50", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "eps", "argument": "--eps", "type": "integer", "label": "Eps", "help": "Error bound on the neighbor finding algorithm (from RANN)", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "verbose", "argument": "--verbose", "type": "boolean", "label": "Verbose", "help": "Print progress bars and output", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--verbose", "falsevalue": ""}, {"model_class": "TextToolParameter", "name": "new_assay_name", "argument": "--new-assay-name", "type": "text", "label": "New assay name", "help": "Name for the new assay containing the integrated data", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "integrated", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "integrate_features_pca", "argument": "--integrate-features-pca", "type": "text", "label": "Integrate-features-pca", "help": "Vector of features to use when computing the PCA to determine the weights. Only set if you want a different set from those used in the anchor finding process", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "features_to_integrate", "argument": "--features-to-integrate", "type": "text", "label": "Features to integrate", "help": "Vector of features to integrate. By default, will use the features used in anchor finding.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "integrate_dims", "argument": "--integrate-dims", "type": "text", "label": "Integrate-dims", "help": "Number of dimensions to use in the anchor weighting procedure", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": "1:30", "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "k_weight", "argument": "--k-weight", "type": "integer", "label": "K weight", "help": "Number of neighbors to consider when weighting anchors", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "100", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "weight_reduction", "argument": "--weight-reduction", "type": "text", "label": "Weight reduction", "help": "Dimension reduction to use when calculating anchor weights. This can be one of: A string, specifying the name of a dimension reduction present in all objects to be integrated; A vector of strings, specifying the name of a dimension reduction to use for each object to be integrated; A vector of DimReduc objects, specifying the object to use for each object in the integration; NULL, in which case a new PCA will be calculated and used to calculate anchor weights. Note that, if specified, the requested dimension reduction will only be used for calculating anchor weights in the first merge between reference and query, as the merged object will subsequently contain more cells than was in query, and weights will need to be calculated for all cells in the object.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "IntegerToolParameter", "name": "sd_weight", "argument": "--sd-weight", "type": "integer", "label": "Sd weight", "help": "Controls the bandwidth of the Gaussian kernel for weighting", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "1", "area": false, "datalist": []}, {"model_class": "TextToolParameter", "name": "sample_tree", "argument": "--sample-tree", "type": "text", "label": "Sample tree", "help": "Specify the order of integration. If NULL, will compute automatically.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": null, "area": false, "datalist": []}, {"model_class": "BooleanToolParameter", "name": "preserve_order", "argument": "--preserve-order", "type": "boolean", "label": "Preserve order", "help": "Do not reorder objects based on size for each pairwise integration.", "refresh_on_change": false, "optional": true, "hidden": false, "is_dynamic": false, "value": false, "truevalue": "--preserve-order", "falsevalue": ""}, {"model_class": "IntegerToolParameter", "name": "integrate_eps", "argument": "--integrate-eps", "type": "integer", "label": "Integrate-eps", "help": "Error bound on the neighbor finding algorithm (from 'RANN')", "refresh_on_change": false, "min": null, "max": null, "optional": true, "hidden": false, "is_dynamic": false, "value": "0", "area": false, "datalist": []}], "outputs": [{"model_class": "ToolOutput", "name": "loom_file", "format": "h5", "label": "${tool.name} on ${on_string}: Seurat Loom", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": "seurat_obj.loom", "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "rds_seurat_file", "format": "rdata", "label": "${tool.name} on ${on_string}: Seurat RDS", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2333", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "anndata_file", "format": "h5ad", "label": "${tool.name} on ${on_string}: AnnData from Seurat", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_3590", "edam_data": "data_0006", "discover_datasets": []}, {"model_class": "ToolOutput", "name": "rds_sce_file", "format": "rdata", "label": "${tool.name} on ${on_string}: Seurat Single Cell Experiment RDS", "hidden": false, "output_type": "data", "format_source": null, "default_identifier_source": "None", "metadata_source": "", "parent": null, "count": 1, "from_work_dir": null, "edam_format": "format_2333", "edam_data": "data_0006", "discover_datasets": []}], "panel_section_id": "single-cell_rnaseq", "panel_section_name": "Single-cell RNAseq", "form_style": "regular"}